import"./style-D-opnHba.js";/* empty css              */import{C as t,n as e}from"./utils-IgB7upkX.js";import{t as a}from"./tema-1pzD2y2L.js";import{d as o}from"./dashboard-4YVVsiRi.js";document.addEventListener("DOMContentLoaded",()=>{console.log(`${t.APP_NAME} v${t.VERSION} inicializado`),a.init(),e.init(),t.DEBUG&&console.log("Modo debug ativado")}),window.CONFIG=t,window.notifications=e,window.tema=a;new class{constructor(){this.charts=new Map,this.init()}async init(){await this.loadMetricas(),this.setupEventListeners()}setupEventListeners(){const t=document.getElementById("periodo");t&&t.addEventListener("change",()=>this.loadMetricas())}async loadMetricas(){try{const t=await o.getMetricasOperacionais();t&&(this.updateMetricasCards(t),this.updateGraficoTempoAtendimento(t.tempoAtendimento),this.updateGraficoOcupacao(t.ocupacao),this.updateGraficoSatisfacao(t.satisfacao),this.updateGraficoDesempenho(t.desempenho))}catch(t){e.error("Erro ao carregar métricas operacionais"),console.error("Erro ao carregar métricas:",t)}}updateMetricasCards(t){const e={tempoMedioAtendimento:document.getElementById("tempoMedioAtendimento"),taxaOcupacaoAtual:document.getElementById("taxaOcupacaoAtual"),satisfacaoClientes:document.getElementById("satisfacaoClientes"),desempenhoFuncionarios:document.getElementById("desempenhoFuncionarios")};Object.entries(e).forEach(([e,a])=>{a&&t[e]&&(a.textContent=this.formatValue(e,t[e]))})}formatValue(t,e){switch(t){case"tempoMedioAtendimento":return`${e} min`;case"taxaOcupacaoAtual":case"satisfacaoClientes":return`${e}%`;case"desempenhoFuncionarios":return`${e}/10`;default:return e}}updateGraficoTempoAtendimento(t){const e=document.getElementById("graficoTempoAtendimento");if(!e)return;this.charts.has("tempoAtendimento")&&this.charts.get("tempoAtendimento").destroy();const a=new Chart(e,{type:"line",data:{labels:t.labels,datasets:[{label:"Tempo Médio (min)",data:t.values,borderColor:"#2196F3",tension:.4,fill:!0,backgroundColor:"rgba(33, 150, 243, 0.1)"}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.raw} min`}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Minutos"}}}}});this.charts.set("tempoAtendimento",a)}updateGraficoOcupacao(t){const e=document.getElementById("graficoOcupacao");if(!e)return;this.charts.has("ocupacao")&&this.charts.get("ocupacao").destroy();const a=new Chart(e,{type:"bar",data:{labels:t.labels,datasets:[{label:"Taxa de Ocupação",data:t.values,backgroundColor:"#4CAF50",borderRadius:4}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.raw}%`}}},scales:{y:{beginAtZero:!0,max:100,title:{display:!0,text:"Porcentagem"}}}}});this.charts.set("ocupacao",a)}updateGraficoSatisfacao(t){const e=document.getElementById("graficoSatisfacao");if(!e)return;this.charts.has("satisfacao")&&this.charts.get("satisfacao").destroy();const a=new Chart(e,{type:"doughnut",data:{labels:["Excelente","Bom","Regular","Ruim"],datasets:[{data:t.values,backgroundColor:["#4CAF50","#8BC34A","#FFC107","#F44336"]}]},options:{responsive:!0,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:t=>{const e=t.raw,a=(e/t.dataset.data.reduce((t,e)=>t+e,0)*100).toFixed(1);return`${t.label}: ${e} (${a}%)`}}}}}});this.charts.set("satisfacao",a)}updateGraficoDesempenho(t){const e=document.getElementById("graficoDesempenho");if(!e)return;this.charts.has("desempenho")&&this.charts.get("desempenho").destroy();const a=new Chart(e,{type:"radar",data:{labels:t.labels,datasets:t.funcionarios.map(t=>({label:t.nome,data:t.metricas,borderColor:this.getRandomColor(),backgroundColor:this.getRandomColor(.2)}))},options:{responsive:!0,scales:{r:{beginAtZero:!0,max:10,ticks:{stepSize:2}}}}});this.charts.set("desempenho",a)}getRandomColor(t=1){const e=[`rgba(33, 150, 243, ${t})`,`rgba(76, 175, 80, ${t})`,`rgba(255, 193, 7, ${t})`,`rgba(156, 39, 176, ${t})`,`rgba(255, 87, 34, ${t})`];return e[Math.floor(Math.random()*e.length)]}};
