import"./style-D-opnHba.js";import"./tema-1pzD2y2L.js";import"./utils-IgB7upkX.js";let e=[],t=null;function o(e){document.getElementById("btnToggleTema").innerHTML="light"===e?'<i class="fas fa-moon"></i>':'<i class="fas fa-sun"></i>'}function n(t=null){const o=document.getElementById("usuariosTableBody");o.innerHTML="";(t||e).forEach(e=>{const t=document.createElement("tr");var n,a;t.innerHTML=`\n      <td><img class="foto-perfil" src="${e.foto||"https://ui-avatars.com/api/?name="+encodeURIComponent(e.nome)}" alt="Foto de Perfil"></td>\n      <td>${e.nome}</td>\n      <td>${e.email}</td>\n      <td>${e.telefone||""}</td>\n      <td>${e.cpf||""}</td>\n      <td>${a=e.perfil,{admin:"Administrador",gerente:"Gerente",operador:"Operador"}[a]||a}</td>\n      <td><span class="status-badge ${e.status}">${n=e.status,{ativo:"Ativo",inativo:"Inativo"}[n]||n}</span></td>\n      <td class="acoes">\n        <button class="btn-icon" onclick="editarUsuario(${e.id})" title="Editar"><i class="fas fa-edit"></i></button>\n        <button class="btn-icon" onclick="excluirUsuario(${e.id})" title="Excluir"><i class="fas fa-trash"></i></button>\n      </td>\n    `,o.appendChild(t)})}function a(){const t=document.getElementById("filtroTipoUsuario").value,o=document.getElementById("searchUsuario").value.toLowerCase();let a=e;"todos"!==t&&(a=a.filter(e=>e.perfil===t)),o&&(a=a.filter(e=>e.nome.toLowerCase().includes(o)||e.email.toLowerCase().includes(o))),n(a)}function i(){document.getElementById("modalNovoUsuario").classList.remove("active"),t=null}function s(o){o.preventDefault();const n=document.getElementById("fotoUsuario"),a=()=>({id:t||(e.length?Math.max(...e.map(e=>e.id))+1:1),nome:document.getElementById("nomeUsuario").value,email:document.getElementById("emailUsuario").value,perfil:document.getElementById("perfilUsuario").value,status:document.getElementById("statusUsuario").value,telefone:document.getElementById("telefoneUsuario").value,cpf:document.getElementById("cpfUsuario").value,foto:""});if(n.files&&n.files[0]){const e=new FileReader;e.onload=function(e){const t=a();t.foto=e.target.result,l(t)},e.readAsDataURL(n.files[0])}else l(a())}function l(o){if(t){const n=e.findIndex(e=>e.id===t);e[n]=o}else e.push(o);n(),i()}document.addEventListener("DOMContentLoaded",()=>{!function(){const e=localStorage.getItem("tema")||"light";document.body.className=e,o(e),document.getElementById("btnToggleTema").onclick=()=>{const e=document.body.classList.contains("light")?"dark":"light";document.body.className=e,localStorage.setItem("tema",e),o(e)}}(),e=[{id:1,nome:"João Silva",email:"joao@empresa.com",perfil:"admin",status:"ativo",telefone:"(11) 99999-1111",cpf:"123.456.789-00",foto:""},{id:2,nome:"Maria Souza",email:"maria@empresa.com",perfil:"gerente",status:"ativo",telefone:"(21) 98888-2222",cpf:"987.654.321-00",foto:""},{id:3,nome:"Carlos Lima",email:"carlos@empresa.com",perfil:"operador",status:"inativo",telefone:"(31) 97777-3333",cpf:"111.222.333-44",foto:""}],n(),document.getElementById("searchUsuario").addEventListener("input",a),document.getElementById("filtroTipoUsuario").addEventListener("change",a),document.getElementById("formNovoUsuario").addEventListener("submit",s)}),window.abrirModalNovoUsuario=function(){t=null,document.getElementById("formNovoUsuario").reset(),document.getElementById("modalNovoUsuario").classList.add("active")},window.fecharModalNovoUsuario=i,window.editarUsuario=function(o){const n=e.find(e=>e.id===o);n&&(t=o,document.getElementById("nomeUsuario").value=n.nome,document.getElementById("emailUsuario").value=n.email,document.getElementById("perfilUsuario").value=n.perfil,document.getElementById("statusUsuario").value=n.status,document.getElementById("telefoneUsuario").value=n.telefone||"",document.getElementById("cpfUsuario").value=n.cpf||"",document.getElementById("fotoUsuario").value="",document.getElementById("modalNovoUsuario").classList.add("active"))},window.excluirUsuario=function(t){confirm("Deseja realmente excluir este usuário?")&&(e=e.filter(e=>e.id!==t),n())},window.exportarUsuarios=function(){const t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download="usuarios.json",a.click(),URL.revokeObjectURL(n)},window.imprimirUsuarios=function(){window.print()};
