const t=[{id:1,codigo:"P001",nome:"X-Burger",tipo:"prato",categoria:"Lanches",estoque:0,estoqueMinimo:0,custo:8.5,preco:15.9,status:"ativo",descricao:"Hambúrguer artesanal com queijo, alface e tomate",ingredientes:[{id:1,nome:"Pão de Hambúrguer",quantidade:1,unidade:"un"},{id:2,nome:"Hambúrguer",quantidade:1,unidade:"un"},{id:3,nome:"Queijo",quantidade:1,unidade:"fatia"},{id:4,nome:"Alface",quantidade:1,unidade:"folha"},{id:5,nome:"Tomate",quantidade:2,unidade:"fatia"}]},{id:2,codigo:"P002",nome:"Coca-Cola 350ml",tipo:"mercadoria",categoria:"Bebidas",estoque:48,estoqueMinimo:12,custo:2.5,preco:5.9,status:"ativo",descricao:"Refrigerante Coca-Cola lata 350ml"},{id:3,codigo:"P003",nome:"Batata Frita",tipo:"prato",categoria:"Acompanhamentos",estoque:0,estoqueMinimo:0,custo:3.5,preco:8.9,status:"ativo",descricao:"Porção de batata frita crocante",ingredientes:[{id:6,nome:"Batata",quantidade:200,unidade:"g"},{id:7,nome:"Óleo",quantidade:50,unidade:"ml"}]}],e={produtos:[...t],filtros:{tipo:"todos",categoria:"todas",busca:""},produtoEditando:null},o={totalProdutos:document.getElementById("totalProdutos"),produtosEstoque:document.getElementById("produtosEstoque"),estoqueBaixo:document.getElementById("estoqueBaixo"),valorEstoque:document.getElementById("valorEstoque"),tipoProduto:document.getElementById("tipoProduto"),categoriaProduto:document.getElementById("categoriaProduto"),buscaProduto:document.getElementById("buscaProduto"),corpoTabelaProdutos:document.getElementById("corpoTabelaProdutos"),modalProduto:document.getElementById("modalProduto"),formProduto:document.getElementById("formProduto"),btnFecharModal:document.getElementById("btnFecharModal"),btnCancelar:document.getElementById("btnCancelar"),ingredientesContainer:document.getElementById("ingredientesContainer"),listaIngredientes:document.getElementById("listaIngredientes"),btnAdicionarIngrediente:document.getElementById("btnAdicionarIngrediente"),modalTitle:document.getElementById("modalTitle")},a=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),n=t=>new Intl.NumberFormat("pt-BR").format(t),d=()=>{const t=e.produtos.length,d=e.produtos.filter(t=>t.estoque>0).length,i=e.produtos.filter(t=>t.estoque<=t.estoqueMinimo&&t.estoque>0).length,s=e.produtos.reduce((t,e)=>t+e.estoque*e.custo,0);o.totalProdutos.textContent=n(t),o.produtosEstoque.textContent=n(d),o.estoqueBaixo.textContent=n(i),o.valorEstoque.textContent=a(s)},i=()=>{const t=e.produtos.filter(t=>{const o="todos"===e.filtros.tipo||t.tipo===e.filtros.tipo,a="todas"===e.filtros.categoria||t.categoria===e.filtros.categoria,n=!e.filtros.busca||t.nome.toLowerCase().includes(e.filtros.busca.toLowerCase())||t.codigo.toLowerCase().includes(e.filtros.busca.toLowerCase());return o&&a&&n});o.corpoTabelaProdutos.innerHTML=t.map(t=>`\n    <tr>\n      <td>${t.codigo}</td>\n        <td>${t.nome}</td>\n      <td>${t.tipo.charAt(0).toUpperCase()+t.tipo.slice(1)}</td>\n        <td>${t.categoria}</td>\n      <td>${n(t.estoque)}</td>\n      <td>${a(t.preco)}</td>\n      <td>\n        <span class="status ${t.estoque<=t.estoqueMinimo?"baixo":t.status}">\n          <i class="fas fa-${t.estoque<=t.estoqueMinimo?"exclamation-triangle":"ativo"===t.status?"check-circle":"times-circle"}"></i>\n          ${t.estoque<=t.estoqueMinimo?"Estoque Baixo":"ativo"===t.status?"Ativo":"Inativo"}\n        </span>\n      </td>\n      <td>\n        <div class="acoes-btns">\n          <button onclick="editarProduto(${t.id})" class="btn-editar" title="Editar">\n            <i class="fas fa-edit"></i>\n          </button>\n          <button onclick="excluirProduto(${t.id})" class="btn-excluir" title="Excluir">\n            <i class="fas fa-trash"></i>\n          </button>\n        </div>\n        </td>\n    </tr>\n  `).join("")};function s(){const t=document.getElementById("modalProduto");t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",e.produtoEditando=null,document.getElementById("formProduto").reset()}document.getElementById("btnFiltrar").addEventListener("click",()=>{e.filtros={tipo:o.tipoProduto.value,categoria:o.categoriaProduto.value,busca:o.buscaProduto.value},i()}),document.getElementById("btnAdicionar").addEventListener("click",()=>{e.produtoEditando={id:Date.now(),codigo:c(),nome:"",tipo:"mercadoria",categoria:"",estoque:0,estoqueMinimo:0,custo:0,preco:0,status:"ativo",descricao:"",ingredientes:[]};const t=document.getElementById("modalProduto");t.style.display="flex",t.style.opacity="1",t.style.visibility="visible",document.getElementById("tipoProdutoForm").value=e.produtoEditando.tipo,document.getElementById("categoriaProdutoForm").value=e.produtoEditando.categoria,document.getElementById("codigoProduto").value=e.produtoEditando.codigo,document.getElementById("nomeProduto").value="",document.getElementById("descricaoProduto").value="",document.getElementById("estoqueProduto").value="0",document.getElementById("estoqueMinimo").value="0",document.getElementById("custoProduto").value="0",document.getElementById("precoProduto").value="0",document.getElementById("margemProduto").value="0",document.getElementById("ingredientesContainer").classList.add("hidden")}),document.getElementById("btnFecharModal").addEventListener("click",s),document.getElementById("btnCancelar").addEventListener("click",s),document.getElementById("formProduto").addEventListener("submit",t=>{t.preventDefault(),r()}),document.getElementById("tipoProdutoForm").addEventListener("change",t=>{const e=document.getElementById("ingredientesContainer");"prato"===t.target.value?e.classList.remove("hidden"):e.classList.add("hidden")});const c=()=>{const t=e.produtos[e.produtos.length-1],o=t?parseInt(t.codigo.replace("P","")):0;return`P${String(o+1).padStart(3,"0")}`},r=()=>{const t=new FormData(o.formProduto),a=Object.fromEntries(t.entries()),n={...e.produtoEditando,...a,estoque:Number(a.estoque),estoqueMinimo:Number(a.estoqueMinimo),custo:Number(a.custo),preco:Number(a.preco)},c=e.produtos.findIndex(t=>t.id===n.id);c>=0?(e.produtos[c]=n,l("Produto atualizado com sucesso!","success")):(e.produtos.push(n),l("Produto adicionado com sucesso!","success")),s(),i(),d()},l=(t,e)=>{const o=document.createElement("div");o.className=`notificacao ${e}`,o.innerHTML=`\n    <i class="fas fa-check-circle"></i>\n    <span>${t}</span>\n  `,document.body.appendChild(o),setTimeout(()=>{o.classList.add("show")},100),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>{o.remove()},300)},3e3)};function u(){const t=parseFloat(document.getElementById("custoProduto").value)||0,e=parseFloat(document.getElementById("precoProduto").value)||0,o=t>0?(e-t)/t*100:0;document.getElementById("margemProduto").value=o.toFixed(2)}function m(){document.getElementById("modalProduto").classList.remove("show"),document.body.style.overflow="",document.getElementById("formProduto").reset()}(()=>{const e=[...new Set(t.map(t=>t.categoria))];o.categoriaProduto.innerHTML=`\n    <option value="todas">Todas</option>\n    ${e.map(t=>`<option value="${t}">${t}</option>`).join("")}\n  `,document.getElementById("categoriaProdutoForm").innerHTML=o.categoriaProduto.innerHTML,i(),d()})(),document.getElementById("custoProduto").addEventListener("input",u),document.getElementById("precoProduto").addEventListener("input",u),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("btnToggleTema"),e=document.body;"dark"===localStorage.getItem("tema")&&(e.classList.remove("light"),e.classList.add("dark"),t.innerHTML='<i class="fas fa-sun"></i>'),t.addEventListener("click",()=>{e.classList.toggle("dark"),e.classList.toggle("light");const o=e.classList.contains("dark");localStorage.setItem("tema",o?"dark":"light"),t.innerHTML=o?'<i class="fas fa-sun"></i>':'<i class="fas fa-moon"></i>'}),function(){const t=document.getElementById("graficoEstoqueCategoria").getContext("2d");new Chart(t,{type:"doughnut",data:{labels:["Bebidas","Alimentos","Limpeza","Outros"],datasets:[{data:[30,40,20,10],backgroundColor:["#4CAF50","#2196F3","#FFC107","#9C27B0"],borderWidth:0}]},options:{responsive:!0,plugins:{legend:{position:"bottom",labels:{padding:20,font:{size:12}}}},cutout:"70%"}});const e=document.getElementById("graficoMovimentacao").getContext("2d");new Chart(e,{type:"line",data:{labels:["Jan","Fev","Mar","Abr","Mai","Jun"],datasets:[{label:"Entradas",data:[65,59,80,81,56,55],borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0},{label:"Saídas",data:[28,48,40,19,86,27],borderColor:"#F44336",backgroundColor:"rgba(244, 67, 54, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,plugins:{legend:{position:"bottom",labels:{padding:20,font:{size:12}}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{grid:{display:!1}}}}})}(),function(){const t=[{codigo:"001",produto:"Coca-Cola 2L",categoria:"Bebidas",quantidade:50,minimo:10,ultimaAtualizacao:"2024-03-15"},{codigo:"002",produto:"Arroz 5kg",categoria:"Alimentos",quantidade:30,minimo:15,ultimaAtualizacao:"2024-03-14"},{codigo:"003",produto:"Detergente",categoria:"Limpeza",quantidade:5,minimo:20,ultimaAtualizacao:"2024-03-13"}];(function(t){const e=document.getElementById("corpoTabelaEstoque");e.innerHTML="",t.forEach(t=>{const o=(a=t.quantidade,n=t.minimo,0===a?{class:"critico",texto:"Sem Estoque"}:a<=n?{class:"baixo",texto:"Estoque Baixo"}:{class:"normal",texto:"Normal"});var a,n;const d=document.createElement("tr");d.innerHTML=`\n      <td>${t.codigo}</td>\n      <td>${t.produto}</td>\n      <td>${t.categoria}</td>\n      <td>${t.quantidade}</td>\n      <td>${t.minimo}</td>\n      <td><span class="status ${o.class}">${o.texto}</span></td>\n      <td>${t.ultimaAtualizacao}</td>\n      <td>\n        <button onclick="editarProduto('${t.codigo}')" class="estoque-btn-icon" aria-label="Editar produto">\n          <i class="fas fa-edit"></i>\n        </button>\n        <button onclick="excluirProduto('${t.codigo}')" class="estoque-btn-icon" aria-label="Excluir produto">\n          <i class="fas fa-trash"></i>\n        </button>\n      </td>\n    `,e.appendChild(d)})})(t),function(t){document.getElementById("totalProdutos").textContent=t.length;const e=t.filter(t=>t.quantidade<=t.minimo).length;document.getElementById("produtosBaixoEstoque").textContent=e;const o=t.filter(t=>0===t.quantidade).length;document.getElementById("produtosSemEstoque").textContent=o,document.getElementById("valorTotalEstoque").textContent="R$ 15.000,00"}(t)}(),document.getElementById("searchProduto").addEventListener("input",t=>{const e=t.target.value.toLowerCase();document.querySelectorAll("#corpoTabelaEstoque tr").forEach(t=>{const o=t.textContent.toLowerCase();t.style.display=o.includes(e)?"":"none"})})}),document.addEventListener("click",t=>{const e=document.getElementById("modalProduto");t.target===e&&m()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&m()});let g=[];function p(t=g){const e=document.getElementById("clientesTableBody");e.innerHTML="",t.forEach(t=>{const o=document.createElement("tr");var a,n;o.innerHTML=`\n            <td>${t.nome}</td>\n            <td>${t.email}</td>\n            <td>${t.telefone}</td>\n            <td><span class="status-badge ${t.status}">${n=t.status,"ativo"===n?"Ativo":"Inativo"}</span></td>\n            <td>${a=t.ultimaVisita,new Date(a).toLocaleDateString("pt-BR")}</td>\n            <td>\n                <div class="table-actions">\n                    <button class="btn-icon" onclick="editarCliente(${t.id})" data-tooltip="Editar">\n                        <i class="fas fa-edit"></i>\n                    </button>\n                    <button class="btn-icon" onclick="visualizarCliente(${t.id})" data-tooltip="Visualizar">\n                        <i class="fas fa-eye"></i>\n                    </button>\n                    <button class="btn-icon" onclick="excluirCliente(${t.id})" data-tooltip="Excluir">\n                        <i class="fas fa-trash"></i>\n                    </button>\n                </div>\n            </td>\n        `,e.appendChild(o)})}document.addEventListener("DOMContentLoaded",()=>{g=[{id:1,nome:"João Silva",email:"joao.silva@email.com",telefone:"(11) 98765-4321",status:"ativo",ultimaVisita:"2024-03-15",cpf:"123.456.789-00",endereco:"Rua das Flores, 123",cidade:"São Paulo",estado:"SP",observacoes:"Cliente preferencial"},{id:2,nome:"Maria Santos",email:"maria.santos@email.com",telefone:"(11) 91234-5678",status:"ativo",ultimaVisita:"2024-03-14",cpf:"987.654.321-00",endereco:"Av. Principal, 456",cidade:"São Paulo",estado:"SP",observacoes:""},{id:3,nome:"Pedro Oliveira",email:"pedro.oliveira@email.com",telefone:"(11) 99876-5432",status:"inativo",ultimaVisita:"2024-02-28",cpf:"456.789.123-00",endereco:"Rua dos Pinheiros, 789",cidade:"São Paulo",estado:"SP",observacoes:"Cliente inativo há 30 dias"}],function(){const t=g.length,e=g.filter(t=>"ativo"===t.status).length,o=g.filter(t=>"inativo"===t.status).length,a=g.filter(t=>{const e=new Date(t.ultimaVisita),o=new Date,a=Math.abs(o-e);return Math.ceil(a/864e5)<=30}).length;document.getElementById("totalClientes").textContent=t,document.getElementById("clientesAtivos").textContent=e,document.getElementById("clientesInativos").textContent=o,document.getElementById("novosClientes").textContent=a}(),p(g),function(){const t=document.getElementById("btnToggleTema"),e=document.body,o=t.querySelector("i");"dark"===localStorage.getItem("tema")&&(e.classList.add("dark"),o.classList.replace("fa-moon","fa-sun"));t.addEventListener("click",()=>{e.classList.toggle("dark");const t=e.classList.contains("dark");localStorage.setItem("tema",t?"dark":"light"),o.classList.replace(t?"fa-moon":"fa-sun",t?"fa-sun":"fa-moon")})}(),document.getElementById("searchClient").addEventListener("input",t=>{const e=t.target.value.toLowerCase();p(g.filter(t=>t.nome.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.telefone.includes(e)))}),function(){const t=document.getElementById("cpfCliente"),e=document.getElementById("telefoneCliente");t.addEventListener("input",t=>{let e=t.target.value.replace(/\D/g,"");e.length<=11&&(e=e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),t.target.value=e)}),e.addEventListener("input",t=>{let e=t.target.value.replace(/\D/g,"");e.length<=11&&(e=e.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"),t.target.value=e)})}()});let E=[],v=null;const f={receita:["Vendas","Serviços","Investimentos","Outros"],despesa:["Aluguel","Funcionários","Fornecedores","Impostos","Manutenção","Outros"]};function y(t){document.getElementById("btnToggleTema").innerHTML="light"===t?'<i class="fas fa-moon"></i>':'<i class="fas fa-sun"></i>'}function b(t=null){const e=document.getElementById("transacoesTableBody");e.innerHTML="";(t||E).forEach(t=>{const o=document.createElement("tr");var a;o.innerHTML=`\n      <td>${function(t){if(!t)return"";return new Date(t).toLocaleDateString("pt-BR")}(t.data)}</td>\n      <td>${t.descricao}</td>\n      <td>${t.categoria}</td>\n      <td>${"receita"===t.tipo?"Receita":"Despesa"}</td>\n      <td class="${"receita"===t.tipo?"valor-positivo":"valor-negativo"}">${P(t.valor)}</td>\n      <td><span class="status ${t.status}">${a=t.status,{pago:"Pago",pendente:"Pendente",atrasado:"Atrasado",cancelado:"Cancelado"}[a]||a}</span></td>\n      <td class="acoes">\n        <button class="btn-icon" onclick="editarTransacao(${t.id})" title="Editar"><i class="fas fa-edit"></i></button>\n        <button class="btn-icon" onclick="excluirTransacao(${t.id})" title="Excluir"><i class="fas fa-trash"></i></button>\n      </td>\n    `,e.appendChild(o)})}function B(){const t=document.getElementById("filtroTipo").value,e=document.getElementById("filtroCategoria").value,o=document.getElementById("searchFinance").value.toLowerCase();let a=E;"todos"!==t&&(a=a.filter(e=>e.tipo===t)),"todas"!==e&&(a=a.filter(t=>t.categoria.toLowerCase()===e)),o&&(a=a.filter(t=>t.descricao.toLowerCase().includes(o)||t.categoria.toLowerCase().includes(o))),b(a)}function I(){document.getElementById("modalNovaTransacao").classList.remove("active"),v=null}function C(){const t=document.getElementById("tipoTransacao").value,e=document.getElementById("categoriaTransacao");e.innerHTML="",f[t].forEach(t=>{const o=document.createElement("option");o.value=t.toLowerCase(),o.textContent=t,e.appendChild(o)})}function L(t){t.preventDefault();const e={id:v||(E.length?Math.max(...E.map(t=>t.id))+1:1),data:document.getElementById("dataTransacao").value,descricao:document.getElementById("descricaoTransacao").value,categoria:document.getElementById("categoriaTransacao").selectedOptions[0].textContent,tipo:document.getElementById("tipoTransacao").value,valor:parseFloat(document.getElementById("valorTransacao").value),status:"pendente",formaPagamento:document.getElementById("formaPagamento").value};if(v){const t=E.findIndex(t=>t.id===v);E[t]=e}else E.push(e);b(),h(),I()}function h(){const t=E.reduce((t,e)=>t+("receita"===e.tipo?e.valor:-e.valor),0),e=E.filter(t=>"receita"===t.tipo).reduce((t,e)=>t+e.valor,0),o=E.filter(t=>"despesa"===t.tipo).reduce((t,e)=>t+e.valor,0),a=e-o;document.getElementById("saldoAtual").textContent=P(t),document.getElementById("receitasMes").textContent=P(e),document.getElementById("despesasMes").textContent=P(o);const n=document.getElementById("resultadoMes");n.textContent=P(a),n.className=a>=0?"valor-positivo":"valor-negativo"}function P(t){return t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}document.addEventListener("DOMContentLoaded",()=>{!function(){const t=localStorage.getItem("tema")||"light";document.body.className=t,y(t),document.getElementById("btnToggleTema").onclick=()=>{const t=document.body.classList.contains("light")?"dark":"light";document.body.className=t,localStorage.setItem("tema",t),y(t)}}(),E=[{id:1,data:"2024-06-01",descricao:"Venda de produtos",categoria:"Vendas",tipo:"receita",valor:1500,status:"pago",formaPagamento:"cartao_credito"},{id:2,data:"2024-06-02",descricao:"Pagamento aluguel",categoria:"Aluguel",tipo:"despesa",valor:800,status:"pendente",formaPagamento:"boleto"}],b(),h(),document.getElementById("searchFinance").addEventListener("input",B),document.getElementById("filtroTipo").addEventListener("change",B),document.getElementById("filtroCategoria").addEventListener("change",B),document.getElementById("tipoTransacao").addEventListener("change",C),document.getElementById("formNovaTransacao").addEventListener("submit",L),C(),function(){const t=document.getElementById("graficoFluxoCaixa").getContext("2d"),e=document.getElementById("graficoDespesas").getContext("2d");new Chart(t,{type:"line",data:{labels:["Jan","Fev","Mar","Abr","Mai","Jun"],datasets:[{label:"Receitas",data:[12e3,19e3,15e3,17e3,22e3,2e4],borderColor:"#4CAF50",tension:.4},{label:"Despesas",data:[1e4,15e3,13e3,14e3,18e3,16e3],borderColor:"#F44336",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}}),new Chart(e,{type:"doughnut",data:{labels:["Aluguel","Funcionários","Fornecedores","Impostos","Outros"],datasets:[{data:[30,25,20,15,10],backgroundColor:["#FFC107","#2196F3","#9C27B0","#F44336","#607D8B"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})}()}),window.abrirModalNovaTransacao=function(){v=null,document.getElementById("formNovaTransacao").reset(),C(),document.getElementById("modalNovaTransacao").classList.add("active")},window.fecharModalNovaTransacao=I,window.editarTransacao=function(t){const e=E.find(e=>e.id===t);e&&(v=t,document.getElementById("tipoTransacao").value=e.tipo,C(),document.getElementById("categoriaTransacao").value=e.categoria.toLowerCase(),document.getElementById("descricaoTransacao").value=e.descricao,document.getElementById("valorTransacao").value=e.valor,document.getElementById("dataTransacao").value=e.data,document.getElementById("formaPagamento").value=e.formaPagamento,document.getElementById("modalNovaTransacao").classList.add("active"))},window.excluirTransacao=function(t){confirm("Deseja realmente excluir esta transação?")&&(E=E.filter(e=>e.id!==t),b(),h())},window.exportarTransacoes=function(){const t=JSON.stringify(E,null,2),e=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.download="transacoes.json",a.click(),URL.revokeObjectURL(o)},window.imprimirRelatorio=function(){window.print()};let T=[];function w(t){document.getElementById("btnToggleTema").innerHTML="light"===t?'<i class="fas fa-moon"></i>':'<i class="fas fa-sun"></i>'}function x(t=null){const e=document.getElementById("relatoriosTableBody");e.innerHTML="";(t||T).forEach(t=>{const o=document.createElement("tr");var a,n;o.innerHTML=`\n      <td>${function(t){if(!t)return"";return new Date(t).toLocaleDateString("pt-BR",{month:"2-digit",year:"numeric"})}(t.data)}</td>\n      <td>${n=t.tipo,{vendas:"Vendas",despesas:"Despesas",estoque:"Estoque",clientes:"Clientes"}[n]||n}</td>\n      <td>${t.titulo}</td>\n      <td>${t.responsavel}</td>\n      <td><span class="status ${t.status}">${a=t.status,{sucesso:"Sucesso",gerando:"Gerando",falha:"Falha",cancelado:"Cancelado"}[a]||a}</span></td>\n      <td class="acoes">\n        <button class="btn-icon" onclick="excluirRelatorio(${t.id})" title="Excluir"><i class="fas fa-trash"></i></button>\n      </td>\n    `,e.appendChild(o)})}function q(){const t=document.getElementById("filtroTipoRelatorio").value,e=document.getElementById("searchRelatorio").value.toLowerCase();let o=T;"todos"!==t&&(o=o.filter(e=>e.tipo===t)),e&&(o=o.filter(t=>t.titulo.toLowerCase().includes(e))),x(o)}function M(){document.getElementById("modalNovoRelatorio").classList.remove("active")}function $(t){t.preventDefault();const e={id:T.length?Math.max(...T.map(t=>t.id))+1:1,data:document.getElementById("periodoRelatorio").value+"-01",tipo:document.getElementById("tipoRelatorio").value,titulo:document.getElementById("tituloRelatorio").value,responsavel:"Usuário",status:"gerando"};T.push(e),x(),M()}document.addEventListener("DOMContentLoaded",()=>{!function(){const t=localStorage.getItem("tema")||"light";document.body.className=t,w(t),document.getElementById("btnToggleTema").onclick=()=>{const t=document.body.classList.contains("light")?"dark":"light";document.body.className=t,localStorage.setItem("tema",t),w(t)}}(),T=[{id:1,data:"2024-06-01",tipo:"vendas",titulo:"Vendas Maio",responsavel:"João",status:"sucesso"},{id:2,data:"2024-06-02",tipo:"despesas",titulo:"Despesas Maio",responsavel:"Maria",status:"gerando"}],x(),document.getElementById("searchRelatorio").addEventListener("input",q),document.getElementById("filtroTipoRelatorio").addEventListener("change",q),document.getElementById("formNovoRelatorio").addEventListener("submit",$),new Chart(document.getElementById("graficoVendas").getContext("2d"),{type:"bar",data:{labels:["Jan","Fev","Mar","Abr","Mai","Jun"],datasets:[{label:"Vendas",data:[120,190,150,170,220,200],backgroundColor:"rgba(79,70,229,0.7)"}]},options:{responsive:!0,maintainAspectRatio:!1}}),new Chart(document.getElementById("graficoDespesas").getContext("2d"),{type:"line",data:{labels:["Jan","Fev","Mar","Abr","Mai","Jun"],datasets:[{label:"Despesas",data:[100,150,130,140,180,160],borderColor:"#F44336",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1}}),new Chart(document.getElementById("graficoEstoque").getContext("2d"),{type:"doughnut",data:{labels:["Baixo","Normal","Alto"],datasets:[{data:[10,60,30],backgroundColor:["#F59E0B","#10B981","#3B82F6"]}]},options:{responsive:!0,maintainAspectRatio:!1}}),new Chart(document.getElementById("graficoClientes").getContext("2d"),{type:"pie",data:{labels:["Ativos","Inativos"],datasets:[{data:[80,20],backgroundColor:["#4F46E5","#E5E7EB"]}]},options:{responsive:!0,maintainAspectRatio:!1}})}),window.abrirModalNovoRelatorio=function(){document.getElementById("formNovoRelatorio").reset(),document.getElementById("modalNovoRelatorio").classList.add("active")},window.fecharModalNovoRelatorio=M,window.excluirRelatorio=function(t){confirm("Deseja realmente excluir este relatório?")&&(T=T.filter(e=>e.id!==t),x())},window.exportarRelatorios=function(){const t=JSON.stringify(T,null,2),e=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.download="relatorios.json",a.click(),URL.revokeObjectURL(o)},window.imprimirRelatorio=function(){window.print()};
