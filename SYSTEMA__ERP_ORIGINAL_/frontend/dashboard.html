<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CorelSys ERP - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #8b5cf6;
            --primary-dark: #7c3aed;
            --secondary-color: #10b981;
            --accent-color: #f59e0b;
            --danger-color: #ef4444;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --stat-color-1: #22c55e;
            --stat-color-2: #ef4444;
            --stat-color-3: #3b82f6;
            --stat-color-4: #f97316;
            --bg-primary: #f9fafb;
            --bg-secondary: #ffffff;
            --bg-card: #ffffff;
            --bg-gradient: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --text-light: #ffffff;
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        body[data-theme='dark'] {
            --primary-color: #a78bfa;
            --primary-dark: #8b5cf6;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --border-color: #334155;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; overflow-x: hidden; }
        .header { background: var(--bg-gradient); padding: 1rem 1.5rem; color: var(--text-light); position: sticky; top: 0; z-index: 999; box-shadow: var(--shadow-md); transition: margin-left .3s ease-in-out, width .3s ease-in-out; width: 100%; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; gap: 1rem; }
        .logo-text h1 { font-size: 1.25rem; font-weight: 700; }
        .header-actions { display: flex; align-items: center; gap: 0.75rem; }
        .header-btn { background: rgba(255, 255, 255, 0.1); border: none; color: var(--text-light); width: 2.5rem; height: 2.5rem; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: var(--transition); backdrop-filter: blur(10px); position: relative; }
        .header-btn:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }
        .user-avatar { width: 2.5rem; height: 2.5rem; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255,255,255,0.3); }
        .sidebar { position: fixed; left: 0; top: 0; height: 100vh; width: 260px; background: var(--bg-secondary); border-right: 1px solid var(--border-color); z-index: 1000; transform: translateX(-100%); transition: transform 0.3s ease-in-out; display: flex; flex-direction: column; }
        .sidebar.open { transform: translateX(0); }
        .sidebar-header { padding: 1rem 1.5rem; display: flex; align-items: center; gap: 1rem; border-bottom: 1px solid var(--border-color); }
        .sidebar-logo-icon { width: 2.5rem; height: 2.5rem; border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; font-size: 1.25rem; background: var(--bg-gradient); color: var(--text-light); }
        .sidebar-logo-text { font-weight: 600; font-size: 1.25rem; color: var(--text-primary); }
        .sidebar-nav { flex-grow: 1; padding: 1rem 0; overflow-y: auto; }
        .sidebar-nav-item { display: flex; align-items: center; gap: 1rem; padding: 0.85rem 1.5rem; margin: 0.25rem 1rem; color: var(--text-secondary); text-decoration: none; transition: var(--transition); border-radius: var(--radius-md); font-weight: 500; }
        .sidebar-nav-item:hover { background: var(--bg-primary); color: var(--primary-color); }
        .sidebar-nav-item.active { background: var(--bg-gradient); color: var(--text-light); box-shadow: var(--shadow-md); }
        .sidebar-nav-item i { width: 1.25rem; text-align: center; }
        .sidebar-footer { padding: 1rem; border-top: 1px solid var(--border-color); }
        .main-container { padding: 1.5rem; transition: margin-left .3s ease-in-out, width .3s ease-in-out; width: 100%; }
        .main-content-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; opacity: 0; visibility: hidden; transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out; }
        .main-content-overlay.active { opacity: 1; visibility: visible; }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .stats-grid-secondary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .stat-card-principal {
            min-height: 200px;
            padding: 2rem;
            border: 2px solid var(--border-color);
            box-shadow: var(--shadow-md);
        }
        .stat-card-secundario {
            min-height: 120px;
            padding: 1.2rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
        }
        .stat-card-principal .stat-value {
            font-size: 2.5rem;
        }
        .stat-card-secundario .stat-value {
            font-size: 1.8rem;
        }
        .stat-card-principal .stat-icon {
            width: 4rem;
            height: 4rem;
            font-size: 1.8rem;
        }
        .stat-card-secundario .stat-icon {
            width: 2.5rem;
            height: 2.5rem;
            font-size: 1.2rem;
        }
        .stat-card { background: var(--bg-card); border-radius: var(--radius-xl); padding: 1.5rem; border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); transition: var(--transition); position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: space-between; min-height: 180px; }
        .stat-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); border-color: var(--primary-color); }
        .stat-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: var(--bg-gradient); opacity: 0; transition: var(--transition); }
        .stat-card:hover::before { opacity: 1; }
        .stat-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .stat-icon { width: 3.5rem; height: 3.5rem; border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; position: relative; }
        .stat-icon::after { content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; border-radius: var(--radius-lg); background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent); opacity: 0; transition: var(--transition); }
        .stat-card:hover .stat-icon::after { opacity: 1; }
        .stat-content { flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .stat-main { margin-bottom: 1rem; }
        .stat-value { font-size: 2.25rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.25rem; line-height: 1.2; }
        .stat-label { color: var(--text-secondary); font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem; }
        .stat-trend { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; font-weight: 600; margin-bottom: 0.75rem; }
        .stat-trend.positive { color: var(--success-color); }
        .stat-trend.negative { color: var(--danger-color); }
        .stat-trend i { font-size: 0.75rem; }
        .stat-chart { height: 40px; margin-top: auto; position: relative; }
        .stat-chart canvas { width: 100% !important; height: 100% !important; }
        .stat-card.receitas .stat-icon { background: linear-gradient(135deg, var(--stat-color-1), #16a34a); }
        .stat-card.despesas .stat-icon { background: linear-gradient(135deg, var(--stat-color-2), #b91c1c); }
        .stat-card.saldo .stat-icon { background: linear-gradient(135deg, var(--stat-color-3), #2563eb); }
        .stat-card.resultado .stat-icon { background: linear-gradient(135deg, var(--stat-color-4), #ea580c); }
        .financeiro-grid { display: grid; gap: 1.5rem; grid-template-columns: 1fr; }
        .chart-card, .table-card { background: var(--bg-card); border-radius: var(--radius-xl); padding: 1.5rem; border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; row-gap: 1rem; }
        .card-title { font-size: 1.125rem; font-weight: 600; color: var(--text-primary); }
        .chart-container { height: 350px; position: relative; }
        .table-controls { display: flex; width: 100%; flex-wrap: wrap; gap: 1rem; align-items: center; }
        .search-input { width: 100%; padding: 0.75rem 1rem; padding-left: 2.5rem; border: 1px solid var(--border-color); border-radius: var(--radius-lg); background: var(--bg-primary); color: var(--text-primary); font-size: 0.875rem; transition: var(--transition); height: 48px; flex-grow: 1; min-width: 200px; }
        .search-wrapper { position: relative; flex-grow: 1; }
        .search-icon { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary); }
        .card-btn { background: var(--bg-primary); border: 1px solid var(--border-color); color: var(--text-primary); padding: 0.5rem 1rem; border-radius: var(--radius-md); font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: var(--transition); display: flex; align-items: center; gap: 0.5rem; height: 48px; }
        .card-btn:hover { background: var(--primary-color); color: var(--text-light); border-color: var(--primary-color); }
        .table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        .table thead th { text-align: left; padding: 0.75rem 1rem; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); border-bottom: 1px solid var(--border-color); }
        .table tbody tr { border-bottom: 1px solid var(--border-color); }
        .table tbody td { padding: 1rem; vertical-align: middle; font-weight: 500; }
        @media (min-width: 1024px) { .header.with-sidebar, .main-container.with-sidebar { margin-left: 260px; width: calc(100% - 260px); } .sidebar { transform: none; transition: left 0.3s ease-in-out; left: -260px; } .sidebar.open { left: 0; } .financeiro-grid { grid-template-columns: minmax(0, 2fr) minmax(0, 1fr); grid-template-areas: "fluxo-caixa   despesas-categoria" "transacoes    transacoes"; } .fluxo-caixa-card { grid-area: fluxo-caixa; } .despesas-categoria-card { grid-area: despesas-categoria; } .transacoes-card { grid-area: transacoes; } }
        @media (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            .financeiro-grid {
                grid-template-columns: 1fr;
            }
            .alertas-container {
                flex-direction: column;
                gap: 1rem;
            }
        }
        @media (max-width: 767px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .main-container {
                padding: 0.5rem;
            }
            .chart-card, .table-card {
                padding: 0.7rem;
            }
            .alertas-container {
                flex-direction: column;
                gap: 0.7rem;
            }
            .atividades-recentes ul li {
                font-size: 0.95rem;
                padding: 0.6rem 0.7rem;
            }
        }
        .alertas-container {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }
        .alerta {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1.5px solid var(--border-color);
            padding: 1.2rem 2rem;
            min-width: 280px;
            max-width: 350px;
            flex: 1 1 280px;
            animation: fadeIn 0.7s;
        }
        .alerta.danger { border-left: 5px solid var(--danger-color); }
        .alerta.warning { border-left: 5px solid var(--warning-color); }
        .alerta.info { border-left: 5px solid var(--primary-color); }
        .alerta i { font-size: 1.5rem; margin-top: 0.2rem; }
        .alerta-titulo { font-weight: 700; font-size: 1.1rem; margin-bottom: 0.2rem; }
        .alerta-descricao { color: var(--text-secondary); font-size: 0.95rem; }
        .atividades-recentes ul li {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            padding: 0.8rem 1.2rem;
            margin-bottom: 0.7rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            font-size: 1rem;
            animation: fadeInUp 0.5s;
        }
        .atividades-recentes ul li i { color: var(--primary-color); font-size: 1.1rem; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Skeleton Loading Styles */
        .skeleton-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }
        .skeleton-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: skeleton-loading 1.5s infinite;
        }
        @keyframes skeleton-loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        .skeleton-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        .skeleton-icon {
            width: 3rem;
            height: 3rem;
            background: var(--border-color);
            border-radius: var(--radius-lg);
            opacity: 0.6;
        }
        .skeleton-trend {
            width: 60px;
            height: 20px;
            background: var(--border-color);
            border-radius: var(--radius-md);
            opacity: 0.6;
        }
        .skeleton-content {
            flex-grow: 1;
        }
        .skeleton-value {
            width: 80%;
            height: 2.5rem;
            background: var(--border-color);
            border-radius: var(--radius-md);
            margin-bottom: 0.5rem;
            opacity: 0.6;
        }
        .skeleton-label {
            width: 60%;
            height: 1rem;
            background: var(--border-color);
            border-radius: var(--radius-md);
            opacity: 0.6;
        }
        .skeleton-card-secundario .skeleton-icon {
            width: 2rem;
            height: 2rem;
        }
        .skeleton-card-secundario .skeleton-value {
            height: 1.8rem;
        }
        /* Skeleton para gráficos */
        .skeleton-chart {
            width: 100%;
            height: 350px;
            background: var(--border-color);
            border-radius: var(--radius-lg);
            opacity: 0.6;
            position: relative;
            overflow: hidden;
        }
        .skeleton-chart::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: skeleton-loading 1.5s infinite;
        }
        /* Skeleton para tabela */
        .skeleton-table {
            width: 100%;
            border-collapse: collapse;
        }
        .skeleton-table th,
        .skeleton-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        .skeleton-table td {
            height: 20px;
            background: var(--border-color);
            border-radius: var(--radius-md);
            opacity: 0.6;
            margin: 0.5rem 0;
        }
        .skeleton-cell {
            width: 100%;
            height: 20px;
            background: var(--border-color);
            border-radius: var(--radius-md);
            opacity: 0.6;
        }
        .skeleton-table-container {
            padding: 1rem;
        }
        /* Melhorias Visuais - Gradientes e Efeitos */
        .stat-card-principal {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(255,255,255,0.1) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.1),
                0 4px 16px rgba(0,0,0,0.05),
                inset 0 1px 0 rgba(255,255,255,0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .stat-card-principal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
        }
        .stat-card-principal:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 
                0 16px 48px rgba(0,0,0,0.15),
                0 8px 24px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.3);
        }
        /* Gradientes específicos por tipo de KPI */
        .stat-card-principal.saldo {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .stat-card-principal.receitas {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        .stat-card-principal.despesas {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        .stat-card-principal.resultado {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }
        /* Cards secundários com gradientes sutis */
        .stat-card-secundario {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 
                0 4px 20px rgba(0,0,0,0.08),
                0 2px 8px rgba(0,0,0,0.04);
            transition: all 0.3s ease;
        }
        .stat-card-secundario:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.12),
                0 4px 16px rgba(0,0,0,0.06);
        }
        /* Ícones animados */
        .stat-icon {
            position: relative;
            transition: all 0.3s ease;
        }
        .stat-icon i {
            font-size: 2rem;
            transition: all 0.3s ease;
        }
        .stat-card:hover .stat-icon {
            transform: scale(1.1) rotate(5deg);
        }
        .stat-card:hover .stat-icon i {
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        /* Efeitos de glassmorphism para outros elementos */
        .chart-card, .section-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.18);
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.1),
                0 4px 16px rgba(0,0,0,0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .chart-card:hover, .section-card:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 40px rgba(0,0,0,0.15),
                0 6px 20px rgba(0,0,0,0.08);
        }
        /* Botões com gradientes */
        .btn-export, .btn-filter {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }
        .btn-export:hover, .btn-filter:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
        }
        /* Filtros com glassmorphism */
        .filters-container {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 
                0 4px 20px rgba(0,0,0,0.08),
                0 2px 8px rgba(0,0,0,0.04);
        }
        /* Alertas com gradientes */
        .alert-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        }
        .alert-card.warning {
            background: linear-gradient(135deg, rgba(255,193,7,0.1) 0%, rgba(255,193,7,0.05) 100%);
            border-color: rgba(255,193,7,0.3);
        }
        .alert-card.danger {
            background: linear-gradient(135deg, rgba(220,53,69,0.1) 0%, rgba(220,53,69,0.05) 100%);
            border-color: rgba(220,53,69,0.3);
        }
        .alert-card.success {
            background: linear-gradient(135deg, rgba(40,167,69,0.1) 0%, rgba(40,167,69,0.05) 100%);
            border-color: rgba(40,167,69,0.3);
        }
        /* Tabela com efeitos modernos */
        .data-table {
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, transparent 100%);
            backdrop-filter: blur(4px);
        }
        .data-table tbody tr {
            transition: all 0.2s ease;
        }
        .data-table tbody tr:hover {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            transform: scale(1.01);
        }
        /* Animações de entrada */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .stat-card, .chart-card, .section-card {
            animation: fadeInUp 0.6s ease-out;
        }
        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }
        /* Melhorias para filtros e inputs */
        .filter-group select, .filter-group input {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: var(--radius-lg);
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .filter-group select:focus, .filter-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 
                0 0 0 3px rgba(102, 126, 234, 0.1),
                0 4px 16px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }
        .filter-group select:hover, .filter-group input:hover {
            border-color: rgba(255,255,255,0.4);
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        /* Efeitos de partículas nos cards principais */
        .stat-card-principal::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .stat-card-principal:hover::after {
            opacity: 1;
        }
        /* Melhorias para responsividade */
        @media (max-width: 768px) {
            .stat-card-principal {
                backdrop-filter: blur(6px);
                box-shadow: 
                    0 4px 16px rgba(0,0,0,0.1),
                    0 2px 8px rgba(0,0,0,0.05);
            }
            .stat-card-principal:hover {
                transform: translateY(-2px) scale(1.01);
            }
            .chart-card, .section-card {
                backdrop-filter: blur(6px);
            }
            .filters-container {
                backdrop-filter: blur(6px);
                padding: 1rem;
            }
        }
        @media (max-width: 480px) {
            .stat-card-principal {
                backdrop-filter: blur(4px);
            }
            .stat-card-principal:hover {
                transform: translateY(-1px);
            }
        }
        /* Efeitos de loading melhorados */
        .skeleton-card {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.15);
        }
        /* Toast notifications com glassmorphism */
        .toast {
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.1),
                0 4px 16px rgba(0,0,0,0.05);
        }
        /* Tooltips Interativos */
        .tooltip {
            position: absolute;
            background: linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.8) 100%);
            backdrop-filter: blur(12px);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-lg);
            font-size: 0.875rem;
            font-weight: 500;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 300px;
            pointer-events: none;
        }
        .tooltip.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .tooltip::before {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 6px solid rgba(0,0,0,0.9);
        }
        /* Modais de Detalhes */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(8px);
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(255,255,255,0.1) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: var(--radius-xl);
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 2001;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .modal.show {
            transform: translate(-50%, -50%) scale(1);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
        }
        .modal-close:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
        }
        /* Drag & Drop */
        .stat-card.dragging {
            opacity: 0.8;
            transform: rotate(5deg) scale(1.05);
            z-index: 1000;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .stat-card.drag-over {
            transform: scale(1.02);
            border: 2px dashed #667eea;
        }
        /* Contadores Animados */
        .stat-value {
            transition: all 0.3s ease;
        }
        .stat-value.animating {
            animation: pulse 0.6s ease-in-out;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        /* Feedback Tátil */
        .stat-card:active {
            transform: scale(0.98);
        }
        /* Atalhos de Teclado */
        .keyboard-hint {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.7) 100%);
            backdrop-filter: blur(12px);
            color: white;
            padding: 1rem;
            border-radius: var(--radius-lg);
            font-size: 0.875rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        .keyboard-hint.show {
            opacity: 1;
            transform: translateY(0);
        }
        /* Estilos para elementos do modal */
        .modal-details {
            display: grid;
            gap: 1.5rem;
        }
        .detail-item {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        .detail-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
        .detail-item h3 {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .detail-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }
        .detail-value.positive {
            color: #10b981;
        }
        .detail-value.negative {
            color: #ef4444;
        }
        .detail-item ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .detail-item li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .detail-item li:last-child {
            border-bottom: none;
        }
        .detail-chart {
            grid-column: 1 / -1;
        }
        .detail-chart h3 {
            margin-bottom: 1rem;
        }
        /* Estilos para atalhos de teclado */
        kbd {
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 100%);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: var(--radius-md);
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        /* Melhorias para responsividade dos modais */
        @media (max-width: 768px) {
            .modal {
                width: 95%;
                padding: 1.5rem;
                max-height: 90vh;
            }
            .detail-value {
                font-size: 1.25rem;
            }
            .modal-details {
                gap: 1rem;
            }
            .detail-item {
                padding: 1rem;
            }
        }
        /* Métricas de Performance */
        .performance-metrics {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(135deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.7) 100%);
            backdrop-filter: blur(12px);
            color: white;
            padding: 0.75rem;
            border-radius: var(--radius-lg);
            font-size: 0.75rem;
            z-index: 1000;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.3s ease;
        }
        .performance-metrics.show {
            opacity: 1;
            transform: translateX(0);
        }
        .performance-metrics .metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
        }
        .performance-metrics .metric:last-child {
            margin-bottom: 0;
        }
        .performance-metrics .value {
            font-weight: 600;
            color: #10b981;
        }
        /* Loading States Otimizados */
        .lazy-loading {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }
        .lazy-loading.loaded {
            opacity: 1;
            transform: translateY(0);
        }
        /* Skeleton Otimizado */
        .skeleton-optimized {
            background: linear-gradient(90deg, 
                var(--border-color) 25%, 
                rgba(255,255,255,0.1) 50%, 
                var(--border-color) 75%);
            background-size: 200% 100%;
            animation: skeleton-shimmer 1.5s infinite;
        }
        @keyframes skeleton-shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        /* Cache Indicator */
        .cache-indicator {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-lg);
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        .cache-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body data-theme="light">
    <div class="main-content-overlay" id="mainContentOverlay"></div>
    <div class="toast-container" id="toastContainer"></div>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo-icon">
                <i class="fas fa-rocket"></i>
            </div>
            <span class="sidebar-logo-text">CorelSys</span>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard.html" class="sidebar-nav-item active">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a href="pdv.html" class="sidebar-nav-item">
                <i class="fas fa-cash-register"></i> PDV
            </a>
            <a href="produtos.html" class="sidebar-nav-item">
                <i class="fas fa-box"></i> Produtos
            </a>
            <a href="estoque.html" class="sidebar-nav-item">
                <i class="fas fa-warehouse"></i> Estoque
            </a>
            <a href="financeiro.html" class="sidebar-nav-item">
                <i class="fas fa-dollar-sign"></i> Financeiro
            </a>
            <a href="relatorios.html" class="sidebar-nav-item">
                <i class="fas fa-file-alt"></i> Relatórios
            </a>
            <a href="clientes.html" class="sidebar-nav-item">
                <i class="fas fa-users"></i> Clientes
            </a>
            <a href="usuarios.html" class="sidebar-nav-item">
                <i class="fas fa-user-shield"></i> Usuários
            </a>
        </nav>
        <div class="sidebar-footer">
            <a href="configuracoes.html" class="sidebar-nav-item">
                <i class="fas fa-cog"></i> Configurações
            </a>
            <a href="#" class="sidebar-nav-item" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Sair
            </a>
        </div>
    </aside>
    <header class="header" id="header">
        <div class="header-content">
            <div class="logo">
                <button class="header-btn" id="menuToggle"><i class="fas fa-bars"></i></button>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="themeToggle"><i class="fas fa-moon"></i></button>
                <button class="header-btn">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                <img src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="Avatar do Usuário" class="user-avatar">
            </div>
        </div>
    </header>
    <main class="main-container" id="mainContainer">
        <div class="stats-grid">
            <!-- SKELETON LOADING PARA KPIs PRINCIPAIS -->
            <div class="skeleton-card stat-card-principal" id="skeleton-kpi-1">
                <div class="skeleton-header">
                    <div class="skeleton-icon"></div>
                    <div class="skeleton-trend"></div>
                </div>
                <div class="skeleton-content">
                    <div class="skeleton-value"></div>
                    <div class="skeleton-label"></div>
                </div>
            </div>
            <div class="skeleton-card stat-card-principal" id="skeleton-kpi-2">
                <div class="skeleton-header">
                    <div class="skeleton-icon"></div>
                    <div class="skeleton-trend"></div>
                </div>
                <div class="skeleton-content">
                    <div class="skeleton-value"></div>
                    <div class="skeleton-label"></div>
                </div>
            </div>
            <div class="skeleton-card stat-card-principal" id="skeleton-kpi-3">
                <div class="skeleton-header">
                    <div class="skeleton-icon"></div>
                    <div class="skeleton-trend"></div>
                </div>
                <div class="skeleton-content">
                    <div class="skeleton-value"></div>
                    <div class="skeleton-label"></div>
                </div>
            </div>
            <div class="skeleton-card stat-card-principal" id="skeleton-kpi-4">
                <div class="skeleton-header">
                    <div class="skeleton-icon"></div>
                    <div class="skeleton-trend"></div>
                </div>
                <div class="skeleton-content">
                    <div class="skeleton-value"></div>
                    <div class="skeleton-label"></div>
                </div>
            </div>
            <!-- KPIs PRINCIPAIS REAIS (inicialmente ocultos) -->
            <div class="stat-card stat-card-principal saldo" id="kpi-1" style="display: none;" 
                 data-tooltip="Saldo atual em caixa. Clique para ver detalhes completos." 
                 onclick="openModal('saldo')">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-cash-register"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>15%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value" data-target="125000">R$ 125.000</div>
                    <div class="stat-label">Saldo em Caixa</div>
                </div>
            </div>
            <div class="stat-card stat-card-principal receitas" id="kpi-2" style="display: none;"
                 data-tooltip="Receitas totais do período. Clique para análise detalhada."
                 onclick="openModal('receitas')">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-users"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>22%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value" data-target="45000">R$ 45.000</div>
                    <div class="stat-label">Receitas do Mês</div>
                </div>
            </div>
            <div class="stat-card stat-card-principal despesas" id="kpi-3" style="display: none;"
                 data-tooltip="Despesas operacionais. Clique para ver breakdown completo."
                 onclick="openModal('despesas')">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-box"></i></div>
                    <div class="stat-trend negative">
                        <i class="fas fa-arrow-down"></i>
                        <span>8%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value" data-target="28000">R$ 28.000</div>
                    <div class="stat-label">Despesas do Mês</div>
                </div>
            </div>
            <div class="stat-card stat-card-principal resultado" id="kpi-4" style="display: none;"
                 data-tooltip="Resultado líquido. Clique para análise de rentabilidade."
                 onclick="openModal('resultado')">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-percentage"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>37%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value" data-target="17000">R$ 17.000</div>
                    <div class="stat-label">Resultado Líquido</div>
                </div>
            </div>
            <div class="stat-card saldo">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-chair"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        +5.0%
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-main">
                        <div class="stat-value">85%</div>
                        <div class="stat-label">Taxa de Ocupação</div>
                    </div>
                    <div class="stat-chart">
                        <canvas id="ocupacaoChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="stat-card receitas">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-stopwatch"></i></div>
                    <div class="stat-trend negative">
                        <i class="fas fa-arrow-down"></i>
                        -2.3%
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-main">
                        <div class="stat-value">12min</div>
                        <div class="stat-label">Tempo Médio Atendimento</div>
                    </div>
                    <div class="stat-chart">
                        <canvas id="tempoAtendimentoChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="stat-card despesas">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-bullseye"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        +10.0%
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-main">
                        <div class="stat-value">R$ 15.000 / R$ 12.340</div>
                        <div class="stat-label">Meta x Realizado</div>
                    </div>
                    <div class="stat-chart">
                        <canvas id="metaChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="stat-card resultado">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-star"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        +1.2%</div>
                </div>
                <div class="stat-content">
                    <div class="stat-main">
                        <div class="stat-value">4.7 <i class="fas fa-star" style="color:gold"></i></div>
                        <div class="stat-label">Satisfação do Cliente</div>
                    </div>
                    <div class="stat-chart">
                        <canvas id="satisfacaoChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="stat-card saldo">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        +8.0%
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-main">
                        <div class="stat-value">+R$ 1.200</div>
                        <div class="stat-label">Comparado à Semana Passada</div>
                    </div>
                    <div class="stat-chart">
                        <canvas id="comparativoChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <!-- SKELETON LOADING PARA KPIs SECUNDÁRIOS -->
        <div class="stats-grid-secondary">
            <div class="skeleton-card stat-card-secundario" id="skeleton-kpi-sec-1"></div>
            <div class="skeleton-card stat-card-secundario" id="skeleton-kpi-sec-2"></div>
            <div class="skeleton-card stat-card-secundario" id="skeleton-kpi-sec-3"></div>
            <div class="skeleton-card stat-card-secundario" id="skeleton-kpi-sec-4"></div>
            <div class="skeleton-card stat-card-secundario" id="skeleton-kpi-sec-5"></div>
            <div class="skeleton-card stat-card-secundario" id="skeleton-kpi-sec-6"></div>
        </div>
        <!-- KPIs SECUNDÁRIOS REAIS (inicialmente ocultos) -->
        <div class="stats-grid-secondary" id="kpis-secundarios-reais" style="display: none;">
            <div class="stat-card stat-card-secundario">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-shopping-cart"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>12%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value">1.247</div>
                    <div class="stat-label">Vendas Hoje</div>
                </div>
            </div>
            <div class="stat-card stat-card-secundario">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-clock"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>8%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value">2.3h</div>
                    <div class="stat-label">Tempo Médio</div>
                </div>
            </div>
            <div class="stat-card stat-card-secundario">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-star"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>15%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value">4.8</div>
                    <div class="stat-label">Satisfação</div>
                </div>
            </div>
            <div class="stat-card stat-card-secundario">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-truck"></i></div>
                    <div class="stat-trend negative">
                        <i class="fas fa-arrow-down"></i>
                        <span>3%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value">89%</div>
                    <div class="stat-label">Disponibilidade</div>
                </div>
            </div>
            <div class="stat-card stat-card-secundario">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="stat-trend positive">
                        <i class="fas fa-arrow-up"></i>
                        <span>22%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value">R$ 45</div>
                    <div class="stat-label">Ticket Médio</div>
                </div>
            </div>
            <div class="stat-card stat-card-secundario">
                <div class="stat-header">
                    <div class="stat-icon"><i class="fas fa-undo"></i></div>
                    <div class="stat-trend negative">
                        <i class="fas fa-arrow-down"></i>
                        <span>5%</span>
                    </div>
                </div>
                <div class="stat-content">
                    <div class="stat-value">2.1%</div>
                    <div class="stat-label">Taxa Retorno</div>
                </div>
            </div>
        </div>
        <!-- ALERTAS DO SISTEMA -->
        <div class="alertas-container" style="margin-bottom: 2rem;">
            <div class="alerta danger" style="animation: fadeIn 0.7s;">
                <i class="fas fa-exclamation-triangle"></i>
                <div class="alerta-conteudo">
                    <div class="alerta-titulo">Estoque Crítico</div>
                    <div class="alerta-descricao">5 produtos estão com estoque abaixo do mínimo!</div>
                </div>
            </div>
            <div class="alerta warning" style="animation: fadeIn 1s;">
                <i class="fas fa-bullseye"></i>
                <div class="alerta-conteudo">
                    <div class="alerta-titulo">Meta Não Atingida</div>
                    <div class="alerta-descricao">As vendas de hoje estão 20% abaixo da meta.</div>
                </div>
            </div>
            <div class="alerta info" style="animation: fadeIn 1.3s;">
                <i class="fas fa-info-circle"></i>
                <div class="alerta-conteudo">
                    <div class="alerta-titulo">Novo Cliente Cadastrado</div>
                    <div class="alerta-descricao">João Silva acabou de se cadastrar no sistema.</div>
                </div>
            </div>
        </div>
        <!-- ATIVIDADES RECENTES -->
        <div class="atividades-recentes" style="margin-bottom: 2rem;">
            <h3 style="margin-bottom: 1rem;">Atividades Recentes</h3>
            <ul style="list-style: none; padding: 0;">
                <li style="animation: fadeInUp 0.5s;"><i class="fas fa-shopping-cart"></i> Venda realizada: R$ 120,00 <span style="color: #6b7280;">(há 2 min)</span></li>
                <li style="animation: fadeInUp 0.7s;"><i class="fas fa-user-plus"></i> Novo cliente cadastrado: Maria Souza <span style="color: #6b7280;">(há 5 min)</span></li>
                <li style="animation: fadeInUp 0.9s;"><i class="fas fa-box"></i> Produto "Refrigerante Lata" ficou com estoque crítico <span style="color: #ef4444;">(há 10 min)</span></li>
                <li style="animation: fadeInUp 1.1s;"><i class="fas fa-cash-register"></i> Fechamento de caixa realizado <span style="color: #6b7280;">(há 20 min)</span></li>
            </ul>
        </div>
        <!-- FILTROS DE PERÍODO -->
        <div class="card-header" style="margin-bottom: 2rem;">
            <div class="table-controls" style="gap: 1rem;">
                <select class="filter-control" id="filtroPeriodo">
                    <option value="hoje">Hoje</option>
                    <option value="semana">Esta Semana</option>
                    <option value="mes">Este Mês</option>
                    <option value="personalizado">Personalizado</option>
                </select>
                <input type="date" class="filter-control" id="dataInicio" style="display:none;">
                <input type="date" class="filter-control" id="dataFim" style="display:none;">
            </div>
        </div>
        <div class="financeiro-grid">
            <div class="chart-card fluxo-caixa-card">
                <div class="card-header">
                    <h2 class="card-title">Vendas por Período</h2>
                    <div class="card-actions">
                        <button class="card-btn" onclick="exportarGrafico('vendasPeriodoChart')"><i class="fas fa-download"></i> PNG</button>
                        <button class="card-btn" onclick="exportarGraficoPDF('vendasPeriodoChart')"><i class="fas fa-file-pdf"></i> PDF</button>
                    </div>
                </div>
                <div class="chart-container"><canvas id="vendasPeriodoChart"></canvas></div>
            </div>
            <div class="chart-card despesas-categoria-card">
                <div class="card-header">
                    <h2 class="card-title">Vendas por Categoria</h2>
                    <div class="card-actions">
                        <button class="card-btn" onclick="exportarGrafico('vendasCategoriaChart')"><i class="fas fa-download"></i> PNG</button>
                        <button class="card-btn" onclick="exportarGraficoPDF('vendasCategoriaChart')"><i class="fas fa-file-pdf"></i> PDF</button>
                    </div>
                </div>
                <div class="chart-container"><canvas id="vendasCategoriaChart"></canvas></div>
            </div>
            <!-- NOVOS GRÁFICOS AVANÇADOS -->
            <div class="chart-card">
                <div class="card-header">
                    <h2 class="card-title">Vendas por Hora (Linha Temporal)</h2>
                    <div class="card-actions">
                        <button class="card-btn" onclick="exportarGrafico('vendasHoraChart')"><i class="fas fa-download"></i> PNG</button>
                        <button class="card-btn" onclick="exportarGraficoPDF('vendasHoraChart')"><i class="fas fa-file-pdf"></i> PDF</button>
                    </div>
                </div>
                <div class="chart-container"><canvas id="vendasHoraChart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="card-header">
                    <h2 class="card-title">Heatmap de Horários de Pico</h2>
                    <div class="card-actions">
                        <button class="card-btn" onclick="exportarGrafico('heatmapChart')"><i class="fas fa-download"></i> PNG</button>
                        <button class="card-btn" onclick="exportarGraficoPDF('heatmapChart')"><i class="fas fa-file-pdf"></i> PDF</button>
                    </div>
                </div>
                <div class="chart-container"><canvas id="heatmapChart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="card-header">
                    <h2 class="card-title">Meta x Realizado</h2>
                    <div class="card-actions">
                        <button class="card-btn" onclick="exportarGrafico('metaRealizadoChart')"><i class="fas fa-download"></i> PNG</button>
                        <button class="card-btn" onclick="exportarGraficoPDF('metaRealizadoChart')"><i class="fas fa-file-pdf"></i> PDF</button>
                    </div>
                </div>
                <div class="chart-container"><canvas id="metaRealizadoChart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="card-header">
                    <h2 class="card-title">Satisfação do Cliente</h2>
                    <div class="card-actions">
                        <button class="card-btn" onclick="exportarGrafico('satisfacaoClienteChart')"><i class="fas fa-download"></i> PNG</button>
                        <button class="card-btn" onclick="exportarGraficoPDF('satisfacaoClienteChart')"><i class="fas fa-file-pdf"></i> PDF</button>
                    </div>
                </div>
                <div class="chart-container"><canvas id="satisfacaoClienteChart"></canvas></div>
            </div>
            <div class="table-card transacoes-card">
                <div class="card-header">
                    <h2 class="card-title">Produtos Mais Vendidos</h2>
                    <div class="table-controls">
                        <div class="search-wrapper">
                            <input type="text" class="search-input" id="searchProduto" placeholder="Buscar produtos...">
                            <i class="fas fa-search search-icon"></i>
                        </div>
                        <button class="card-btn" onclick="exportarProdutos()">
                            <i class="fas fa-file-export"></i> Excel
                        </button>
                        <button class="card-btn" onclick="exportarProdutosCSV()">
                            <i class="fas fa-file-csv"></i> CSV
                        </button>
                        <button class="card-btn" onclick="imprimirRelatorio()">
                            <i class="fas fa-print"></i> Imprimir
                        </button>
                    </div>
                </div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Produto</th><th>Categoria</th><th>Vendas</th><th>Valor Total</th>
                        </tr>
                    </thead>
                    <tbody id="produtosTable">
                        <!-- Linhas serão preenchidas via JS -->
                    </tbody>
                </table>
            </div>
        </div>
        <!-- GRÁFICOS PRINCIPAIS -->
        <div class="charts-container">
            <!-- SKELETON LOADING PARA GRÁFICOS -->
            <div class="chart-card" id="skeleton-chart-1">
                <div class="chart-header">
                    <h3>Carregando...</h3>
                </div>
                <div class="skeleton-chart"></div>
            </div>
            <div class="chart-card" id="skeleton-chart-2">
                <div class="chart-header">
                    <h3>Carregando...</h3>
                </div>
                <div class="skeleton-chart"></div>
            </div>
            <!-- GRÁFICOS REAIS (inicialmente ocultos) -->
            <div class="chart-card lazy-loading" id="chart-1" style="display: none;">
                <div class="chart-header">
                    <h3>Vendas por Período</h3>
                    <div class="chart-actions">
                        <button class="btn-export" onclick="exportChart('vendasChart')">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>
                <canvas id="vendasChart" data-lazy="true"></canvas>
            </div>
            <div class="chart-card lazy-loading" id="chart-2" style="display: none;">
                <div class="chart-header">
                    <h3>Distribuição por Categoria</h3>
                    <div class="chart-actions">
                        <button class="btn-export" onclick="exportChart('categoriaChart')">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>
                <canvas id="categoriaChart" data-lazy="true"></canvas>
            </div>
        </div>
        <!-- PRODUTOS MAIS VENDIDOS -->
        <div class="products-section">
            <!-- SKELETON LOADING PARA TABELA -->
            <div class="section-card" id="skeleton-table">
                <div class="section-header">
                    <h2>Carregando...</h2>
                </div>
                <div class="skeleton-table-container">
                    <table class="skeleton-table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Vendas</th>
                                <th>Receita</th>
                                <th>%</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td></tr>
                            <tr><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td></tr>
                            <tr><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td></tr>
                            <tr><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td></tr>
                            <tr><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td><td><div class="skeleton-cell"></div></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- TABELA REAL (inicialmente oculta) -->
            <div class="section-card" id="table-real" style="display: none;">
                <div class="section-header">
                    <h2>Produtos Mais Vendidos</h2>
                    <div class="section-actions">
                        <button class="btn-export" onclick="exportTable()">
                            <i class="fas fa-download"></i> Exportar
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Vendas</th>
                                <th>Receita</th>
                                <th>%</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="product-info">
                                        <div class="product-name">Hambúrguer Clássico</div>
                                        <div class="product-category">Lanches</div>
                                    </div>
                                </td>
                                <td>1,247</td>
                                <td>R$ 12.470</td>
                                <td><span class="percentage">23%</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-info">
                                        <div class="product-name">Pizza Margherita</div>
                                        <div class="product-category">Pizzas</div>
                                    </div>
                                </td>
                                <td>892</td>
                                <td>R$ 17.840</td>
                                <td><span class="percentage">16%</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-info">
                                        <div class="product-name">Refrigerante Cola</div>
                                        <div class="product-category">Bebidas</div>
                                    </div>
                                </td>
                                <td>2,156</td>
                                <td>R$ 6.468</td>
                                <td><span class="percentage">39%</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-info">
                                        <div class="product-name">Batata Frita</div>
                                        <div class="product-category">Acompanhamentos</div>
                                    </div>
                                </td>
                                <td>1,034</td>
                                <td>R$ 5.170</td>
                                <td><span class="percentage">19%</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-info">
                                        <div class="product-name">Sorvete de Chocolate</div>
                                        <div class="product-category">Sobremesas</div>
                                    </div>
                                </td>
                                <td>567</td>
                                <td>R$ 2.835</td>
                                <td><span class="percentage">10%</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- TOOLTIP GLOBAL -->
        <div id="tooltip" class="tooltip"></div>
        
        <!-- MODAL OVERLAY -->
        <div id="modalOverlay" class="modal-overlay" onclick="closeModal()">
            <div id="modal" class="modal" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <h2 id="modalTitle">Detalhes do KPI</h2>
                    <button class="modal-close" onclick="closeModal()">×</button>
                </div>
                <div id="modalContent">
                    <!-- Conteúdo será carregado dinamicamente -->
                </div>
            </div>
        </div>
        
        <!-- DICA DE TECLADO -->
        <div id="keyboardHint" class="keyboard-hint">
            <strong>Atalhos:</strong><br>
            <kbd>H</kbd> - Home | <kbd>F</kbd> - Filtros | <kbd>E</kbd> - Exportar | <kbd>ESC</kbd> - Fechar
        </div>
        
        <!-- MÉTRICAS DE PERFORMANCE -->
        <div id="performanceMetrics" class="performance-metrics">
            <div class="metric">
                <span>Load Time:</span>
                <span class="value" id="loadTime">--</span>
            </div>
            <div class="metric">
                <span>FPS:</span>
                <span class="value" id="fps">--</span>
            </div>
            <div class="metric">
                <span>Memory:</span>
                <span class="value" id="memory">--</span>
            </div>
        </div>
        
        <!-- CACHE INDICATOR -->
        <div id="cacheIndicator" class="cache-indicator">
            <i class="fas fa-database"></i> Cache Ativo
        </div>
    </main>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Theme switcher
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme) {
            body.setAttribute('data-theme', currentTheme);
            themeToggle.querySelector('i').className = currentTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        }
        themeToggle.addEventListener('click', () => {
            const newTheme = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            themeToggle.querySelector('i').className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            if (vendasPeriodoChart) vendasPeriodoChart.destroy();
            if (vendasCategoriaChart) vendasCategoriaChart.destroy();
            initCharts();
            initMiniCharts();
        });
        // Sidebar toggle
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const mainContainer = document.getElementById('mainContainer');
        const header = document.getElementById('header');
        const overlay = document.getElementById('mainContentOverlay');
        const openSidebar = () => {
            sidebar.classList.add('open');
            if (window.innerWidth < 1024) {
                overlay.classList.add('active');
            } else {
                mainContainer.classList.add('with-sidebar');
                header.classList.add('with-sidebar');
            }
        };
        const closeSidebar = () => {
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
            mainContainer.classList.remove('with-sidebar');
            header.classList.remove('with-sidebar');
        };
        menuToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            sidebar.classList.contains('open') ? closeSidebar() : openSidebar();
        });
        overlay.addEventListener('click', closeSidebar);
        document.addEventListener('click', (e) => {
            if (window.innerWidth < 1024 && sidebar.classList.contains('open') && !sidebar.contains(e.target)) {
                closeSidebar();
            }
        });
        if (window.innerWidth >= 1024) {
            openSidebar();
        }
        // Toast Notification System
        function showToast(type, title, message, duration = 5000) {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            const icons = {
                success: 'fas fa-check-circle',
                error: 'fas fa-exclamation-circle',
                warning: 'fas fa-exclamation-triangle',
                info: 'fas fa-info-circle'
            };
            toast.innerHTML = `
                <i class="toast-icon ${icons[type]}"></i>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            toastContainer.appendChild(toast);
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }
        // Loading System
        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('show');
        }
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('show');
        }
        // Mock Data
        let produtos = [
            { id: 1, nome: 'Hambúrguer Clássico', categoria: 'Lanches', vendas: 120, valor: 1800.00 },
            { id: 2, nome: 'Pizza Margherita', categoria: 'Pizzas', vendas: 95, valor: 2100.00 },
            { id: 3, nome: 'Refrigerante Lata', categoria: 'Bebidas', vendas: 200, valor: 800.00 },
            { id: 4, nome: 'Batata Frita', categoria: 'Porções', vendas: 80, valor: 640.00 },
            { id: 5, nome: 'Suco Natural', categoria: 'Bebidas', vendas: 60, valor: 540.00 },
            { id: 6, nome: 'Salada Caesar', categoria: 'Saladas', vendas: 40, valor: 600.00 },
        ];
        function renderProdutos(produtosFiltrados = produtos) {
            const tableBody = document.getElementById('produtosTable');
            if(!tableBody) return;
            tableBody.innerHTML = produtosFiltrados.map(p => `
                <tr>
                    <td data-label="Produto">${p.nome}</td>
                    <td data-label="Categoria">${p.categoria}</td>
                    <td data-label="Vendas">${p.vendas}</td>
                    <td data-label="Valor Total">${p.valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</td>
                </tr>
            `).join('');
        }
        // Search
        const searchInput = document.getElementById('searchProduto');
        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase();
            const filtered = produtos.filter(p =>
                p.nome.toLowerCase().includes(searchTerm) ||
                p.categoria.toLowerCase().includes(searchTerm)
            );
            renderProdutos(filtered);
        });
        // Export Functions
        window.exportarProdutos = () => {
            showLoading();
            setTimeout(() => {
                hideLoading();
                showToast('success', 'Exportação Concluída', 'Dados exportados com sucesso para Excel');
            }, 1500);
        };
        window.imprimirRelatorio = () => {
            showLoading();
            setTimeout(() => {
                hideLoading();
                showToast('info', 'Relatório Gerado', 'Relatório preparado para impressão');
                window.print();
            }, 1000);
        };
        // Mini Charts for Stat Cards
        function initMiniCharts() {
            const isDarkMode = document.body.getAttribute('data-theme') === 'dark';
            // Vendas Hoje
            const vendasHojeCtx = document.getElementById('vendasHojeChart')?.getContext('2d');
            if (vendasHojeCtx) {
                new Chart(vendasHojeCtx, {
                    type: 'line',
                    data: { labels: ['08h', '10h', '12h', '14h', '16h', '18h'], datasets: [{ data: [10, 25, 40, 60, 90, 120], borderColor: '#3b82f6', backgroundColor: 'rgba(59, 130, 246, 0.1)', borderWidth: 2, fill: true, tension: 0.4, pointRadius: 0 }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } }, elements: { point: { radius: 0 } } }
                });
            }
            // Clientes Atendidos
            const clientesCtx = document.getElementById('clientesChart')?.getContext('2d');
            if (clientesCtx) {
                new Chart(clientesCtx, {
                    type: 'line',
                    data: { labels: ['08h', '10h', '12h', '14h', '16h', '18h'], datasets: [{ data: [2, 10, 30, 60, 90, 120], borderColor: '#22c55e', backgroundColor: 'rgba(34, 197, 94, 0.1)', borderWidth: 2, fill: true, tension: 0.4, pointRadius: 0 }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } }, elements: { point: { radius: 0 } } }
                });
            }
            // Produtos em Falta
            const produtosFaltaCtx = document.getElementById('produtosFaltaChart')?.getContext('2d');
            if (produtosFaltaCtx) {
                new Chart(produtosFaltaCtx, {
                    type: 'line',
                    data: { labels: ['08h', '10h', '12h', '14h', '16h', '18h'], datasets: [{ data: [2, 3, 4, 5, 7, 8], borderColor: '#ef4444', backgroundColor: 'rgba(239, 68, 68, 0.1)', borderWidth: 2, fill: true, tension: 0.4, pointRadius: 0 }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } }, elements: { point: { radius: 0 } } }
                });
            }
            // Ticket Médio
            const ticketMedioCtx = document.getElementById('ticketMedioChart')?.getContext('2d');
            if (ticketMedioCtx) {
                new Chart(ticketMedioCtx, {
                    type: 'line',
                    data: { labels: ['08h', '10h', '12h', '14h', '16h', '18h'], datasets: [{ data: [80, 90, 100, 110, 105, 102.83], borderColor: '#f97316', backgroundColor: 'rgba(249, 115, 22, 0.1)', borderWidth: 2, fill: true, tension: 0.4, pointRadius: 0 }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } }, elements: { point: { radius: 0 } } }
                });
            }
        }
        // Chart.js instances
        let vendasPeriodoChart, vendasCategoriaChart;
        function initCharts() {
            const isDarkMode = document.body.getAttribute('data-theme') === 'dark';
            const gridColor = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            const textColor = isDarkMode ? '#f8fafc' : '#1f2937';
            const tooltipBg = isDarkMode ? '#1e293b' : '#ffffff';
            const tooltipColor = textColor;
            const vendasPeriodoCtx = document.getElementById('vendasPeriodoChart')?.getContext('2d');
            if(vendasPeriodoCtx) {
                vendasPeriodoChart = new Chart(vendasPeriodoCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                        datasets: [
                            {
                                label: 'Vendas',
                                data: [1200, 1500, 1800, 1700, 2100, 2500, 2300],
                                backgroundColor: 'rgba(34, 197, 94, 0.7)',
                                borderWidth: 0
                            }
                        ]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        scales: { x: { ticks: { color: textColor }, grid: { color: gridColor } }, y: { ticks: { color: textColor }, grid: { color: gridColor } } },
                        plugins: { legend: { labels: { color: textColor } }, tooltip: { backgroundColor: tooltipBg, titleColor: tooltipColor, bodyColor: tooltipColor } }
                    }
                });
            }
            const vendasCategoriaCtx = document.getElementById('vendasCategoriaChart')?.getContext('2d');
            if(vendasCategoriaCtx) {
                vendasCategoriaChart = new Chart(vendasCategoriaCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Lanches', 'Pizzas', 'Bebidas', 'Porções', 'Saladas'],
                        datasets: [{
                            data: [35, 25, 20, 10, 10],
                            backgroundColor: ['#3b82f6', '#ef4444', '#f97316', '#22c55e', '#a78bfa'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        plugins: { legend: { position: 'bottom', labels: { color: textColor } }, tooltip: { backgroundColor: tooltipBg, titleColor: tooltipColor, bodyColor: tooltipColor } }
                    }
                });
            }
        }
        // Filtros de período
        const filtroPeriodo = document.getElementById('filtroPeriodo');
        const dataInicio = document.getElementById('dataInicio');
        const dataFim = document.getElementById('dataFim');
        filtroPeriodo.addEventListener('change', () => {
            if (filtroPeriodo.value === 'personalizado') {
                dataInicio.style.display = 'inline-block';
                dataFim.style.display = 'inline-block';
            } else {
                dataInicio.style.display = 'none';
                dataFim.style.display = 'none';
            }
            // Aqui você pode atualizar os gráficos conforme o filtro
        });
        // Gráficos avançados
        function initAdvancedCharts() {
            // Linha temporal - Vendas por Hora
            const vendasHoraCtx = document.getElementById('vendasHoraChart')?.getContext('2d');
            if (vendasHoraCtx) {
                new Chart(vendasHoraCtx, {
                    type: 'line',
                    data: {
                        labels: ['08h', '09h', '10h', '11h', '12h', '13h', '14h', '15h', '16h', '17h', '18h', '19h', '20h'],
                        datasets: [{
                            label: 'Vendas',
                            data: [5, 8, 15, 20, 35, 40, 38, 30, 25, 22, 18, 10, 6],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                enabled: true,
                                callbacks: {
                                    label: function(context) {
                                        return `Vendas: ${context.parsed.y}`;
                                    }
                                }
                            },
                            animation: {
                                duration: 1200,
                                easing: 'easeOutBounce'
                            }
                        }
                    }
                });
            }
            // Heatmap de horários de pico (simulado com gráfico de barras empilhadas)
            const heatmapCtx = document.getElementById('heatmapChart')?.getContext('2d');
            if (heatmapCtx) {
                new Chart(heatmapCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                        datasets: [
                            { label: '08-12h', data: [10, 12, 15, 14, 18, 25, 20], backgroundColor: '#a78bfa' },
                            { label: '12-16h', data: [20, 22, 25, 24, 28, 35, 30], backgroundColor: '#3b82f6' },
                            { label: '16-20h', data: [15, 18, 20, 22, 25, 30, 28], backgroundColor: '#22c55e' }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' },
                            tooltip: {
                                enabled: true,
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.parsed.y} vendas`;
                                    }
                                }
                            },
                            animation: {
                                duration: 1000,
                                easing: 'easeInOutQuart'
                            }
                        },
                        scales: { x: { stacked: true }, y: { stacked: true } }
                    }
                });
            }
            // Meta x Realizado
            const metaRealizadoCtx = document.getElementById('metaRealizadoChart')?.getContext('2d');
            if (metaRealizadoCtx) {
                new Chart(metaRealizadoCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Meta', 'Realizado'],
                        datasets: [{
                            label: 'Valor',
                            data: [15000, 12340],
                            backgroundColor: ['#f59e0b', '#22c55e']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                enabled: true,
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: R$ ${context.parsed.y.toLocaleString('pt-BR')}`;
                                    }
                                }
                            },
                            animation: {
                                duration: 900,
                                easing: 'easeInOutBack'
                            }
                        }
                    }
                });
            }
            // Satisfação do Cliente
            const satisfacaoClienteCtx = document.getElementById('satisfacaoClienteChart')?.getContext('2d');
            if (satisfacaoClienteCtx) {
                new Chart(satisfacaoClienteCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['5 estrelas', '4 estrelas', '3 estrelas', '2 estrelas', '1 estrela'],
                        datasets: [{
                            data: [70, 20, 7, 2, 1],
                            backgroundColor: ['#facc15', '#fde68a', '#fbbf24', '#f59e0b', '#b45309']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' },
                            tooltip: {
                                enabled: true,
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.parsed} avaliações`;
                                    }
                                }
                            },
                            animation: {
                                animateScale: true,
                                duration: 1200,
                                easing: 'easeOutElastic'
                            }
                        }
                    }
                });
            }
        }
        // Initial render
        renderProdutos();
        initCharts();
        initMiniCharts();
        initAdvancedCharts();
        // Show welcome toast
        setTimeout(() => {
            showToast('info', 'Bem-vindo!', 'Dashboard carregado com sucesso');
        }, 1000);
        // Exportação de gráficos em PNG
        window.exportarGrafico = function(canvasId) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            link.download = `${canvasId}.png`;
            link.click();
            showToast('success', 'Exportação', 'Gráfico exportado como PNG!');
        };
        // Exportação de gráficos em PDF
        window.exportarGraficoPDF = function(canvasId) {
            // Sugestão: usar jsPDF para exportar como PDF
            showToast('info', 'Exportação', 'Funcionalidade de exportação em PDF pode ser integrada com jsPDF.');
        };
        // Exportação da tabela em CSV
        window.exportarProdutosCSV = function() {
            let csv = 'Produto,Categoria,Vendas,Valor Total\n';
            produtos.forEach(p => {
                csv += `${p.nome},${p.categoria},${p.vendas},${p.valor}\n`;
            });
            const blob = new Blob([csv], { type: 'text/csv' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'produtos_mais_vendidos.csv';
            link.click();
            showToast('success', 'Exportação', 'Tabela exportada como CSV!');
        };
        // Função para simular carregamento de dados
        function simularCarregamento() {
            // Simular delay de carregamento
            setTimeout(() => {
                // Esconder skeletons dos KPIs principais
                document.querySelectorAll('[id^="skeleton-kpi-"]').forEach(skeleton => {
                    skeleton.style.display = 'none';
                });
                // Mostrar KPIs reais
                document.querySelectorAll('[id^="kpi-"]').forEach(kpi => {
                    kpi.style.display = 'flex';
                });
                
                // Esconder skeletons dos KPIs secundários
                document.querySelectorAll('[id^="skeleton-kpi-sec-"]').forEach(skeleton => {
                    skeleton.style.display = 'none';
                });
                // Mostrar KPIs secundários reais
                document.getElementById('kpis-secundarios-reais').style.display = 'grid';
                
                // Esconder skeletons dos gráficos
                document.getElementById('skeleton-chart-1').style.display = 'none';
                document.getElementById('skeleton-chart-2').style.display = 'none';
                // Mostrar gráficos reais
                document.getElementById('chart-1').style.display = 'block';
                document.getElementById('chart-2').style.display = 'block';
                
                // Esconder skeleton da tabela
                document.getElementById('skeleton-table').style.display = 'none';
                // Mostrar tabela real
                document.getElementById('table-real').style.display = 'block';
                
                // Inicializar gráficos
                initCharts();
                initMiniCharts();
                initAdvancedCharts();
                
                // Mostrar toast de sucesso
                showToast('success', 'Carregamento Concluído', 'Dashboard carregado com sucesso!');
            }, 2000); // 2 segundos de delay
        }
        // Inicializar carregamento
        simularCarregamento();
        
        // TOOLTIPS INTERATIVOS
        function initTooltips() {
            const tooltip = document.getElementById('tooltip');
            const tooltipElements = document.querySelectorAll('[data-tooltip]');
            
            tooltipElements.forEach(element => {
                element.addEventListener('mouseenter', (e) => {
                    const text = e.target.getAttribute('data-tooltip');
                    tooltip.textContent = text;
                    tooltip.classList.add('show');
                    
                    const rect = e.target.getBoundingClientRect();
                    tooltip.style.left = rect.left + (rect.width / 2) - (tooltip.offsetWidth / 2) + 'px';
                    tooltip.style.top = rect.top - tooltip.offsetHeight - 10 + 'px';
                });
                
                element.addEventListener('mouseleave', () => {
                    tooltip.classList.remove('show');
                });
            });
        }
        
        // MODAIS DE DETALHES
        function openModal(type) {
            const modalOverlay = document.getElementById('modalOverlay');
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            const modalData = {
                saldo: {
                    title: 'Detalhes do Saldo em Caixa',
                    content: `
                        <div class="modal-details">
                            <div class="detail-item">
                                <h3>Saldo Atual</h3>
                                <p class="detail-value">R$ 125.000,00</p>
                            </div>
                            <div class="detail-item">
                                <h3>Variação do Mês</h3>
                                <p class="detail-value positive">+15% (R$ 16.250,00)</p>
                            </div>
                            <div class="detail-item">
                                <h3>Projeção Próximo Mês</h3>
                                <p class="detail-value">R$ 143.750,00</p>
                            </div>
                            <div class="detail-chart">
                                <h3>Evolução dos Últimos 6 Meses</h3>
                                <canvas id="modalChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    `
                },
                receitas: {
                    title: 'Análise de Receitas',
                    content: `
                        <div class="modal-details">
                            <div class="detail-item">
                                <h3>Receita Total</h3>
                                <p class="detail-value">R$ 45.000,00</p>
                            </div>
                            <div class="detail-item">
                                <h3>Crescimento</h3>
                                <p class="detail-value positive">+22% vs mês anterior</p>
                            </div>
                            <div class="detail-item">
                                <h3>Principais Fontes</h3>
                                <ul>
                                    <li>Vendas Online: R$ 18.000 (40%)</li>
                                    <li>Vendas Presenciais: R$ 22.500 (50%)</li>
                                    <li>Delivery: R$ 4.500 (10%)</li>
                                </ul>
                            </div>
                        </div>
                    `
                },
                despesas: {
                    title: 'Breakdown de Despesas',
                    content: `
                        <div class="modal-details">
                            <div class="detail-item">
                                <h3>Despesa Total</h3>
                                <p class="detail-value">R$ 28.000,00</p>
                            </div>
                            <div class="detail-item">
                                <h3>Redução</h3>
                                <p class="detail-value positive">-8% vs mês anterior</p>
                            </div>
                            <div class="detail-item">
                                <h3>Principais Categorias</h3>
                                <ul>
                                    <li>Fornecedores: R$ 15.000 (54%)</li>
                                    <li>Funcionários: R$ 8.000 (29%)</li>
                                    <li>Operacional: R$ 3.000 (11%)</li>
                                    <li>Marketing: R$ 2.000 (6%)</li>
                                </ul>
                            </div>
                        </div>
                    `
                },
                resultado: {
                    title: 'Análise de Rentabilidade',
                    content: `
                        <div class="modal-details">
                            <div class="detail-item">
                                <h3>Resultado Líquido</h3>
                                <p class="detail-value">R$ 17.000,00</p>
                            </div>
                            <div class="detail-item">
                                <h3>Margem de Lucro</h3>
                                <p class="detail-value positive">37,8%</p>
                            </div>
                            <div class="detail-item">
                                <h3>ROI</h3>
                                <p class="detail-value positive">60,7%</p>
                            </div>
                            <div class="detail-item">
                                <h3>Comparativo</h3>
                                <p class="detail-value positive">+37% vs mês anterior</p>
                            </div>
                        </div>
                    `
                }
            };
            
            const data = modalData[type];
            modalTitle.textContent = data.title;
            modalContent.innerHTML = data.content;
            
            modalOverlay.classList.add('show');
            modal.classList.add('show');
            
            // Inicializar gráfico do modal se necessário
            if (type === 'saldo') {
                setTimeout(() => initModalChart(), 100);
            }
        }
        
        function closeModal() {
            const modalOverlay = document.getElementById('modalOverlay');
            const modal = document.getElementById('modal');
            
            modal.classList.remove('show');
            modalOverlay.classList.remove('show');
        }
        
        function initModalChart() {
            const ctx = document.getElementById('modalChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [{
                        label: 'Saldo (R$)',
                        data: [85000, 92000, 105000, 98000, 112000, 125000],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // CONTADORES ANIMADOS
        function animateCounters() {
            const counters = document.querySelectorAll('.stat-value[data-target]');
            
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const duration = 2000; // 2 segundos
                const step = target / (duration / 16); // 60fps
                let current = 0;
                
                const timer = setInterval(() => {
                    current += step;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    
                    // Formatar valor
                    let displayValue;
                    if (counter.textContent.includes('R$')) {
                        displayValue = `R$ ${Math.floor(current).toLocaleString('pt-BR')}`;
                    } else {
                        displayValue = Math.floor(current).toLocaleString('pt-BR');
                    }
                    
                    counter.textContent = displayValue;
                }, 16);
                
                counter.classList.add('animating');
                setTimeout(() => counter.classList.remove('animating'), 600);
            });
        }
        
        // DRAG & DROP
        function initDragAndDrop() {
            const cards = document.querySelectorAll('.stat-card-principal');
            let draggedCard = null;
            
            cards.forEach(card => {
                card.setAttribute('draggable', true);
                
                card.addEventListener('dragstart', (e) => {
                    draggedCard = card;
                    card.classList.add('dragging');
                });
                
                card.addEventListener('dragend', () => {
                    card.classList.remove('dragging');
                    draggedCard = null;
                });
                
                card.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    if (draggedCard && draggedCard !== card) {
                        card.classList.add('drag-over');
                    }
                });
                
                card.addEventListener('dragleave', () => {
                    card.classList.remove('drag-over');
                });
                
                card.addEventListener('drop', (e) => {
                    e.preventDefault();
                    card.classList.remove('drag-over');
                    
                    if (draggedCard && draggedCard !== card) {
                        const cardsContainer = card.parentNode;
                        const cardsArray = Array.from(cardsContainer.children);
                        const draggedIndex = cardsArray.indexOf(draggedCard);
                        const dropIndex = cardsArray.indexOf(card);
                        
                        if (draggedIndex < dropIndex) {
                            cardsContainer.insertBefore(draggedCard, card.nextSibling);
                        } else {
                            cardsContainer.insertBefore(draggedCard, card);
                        }
                        
                        showToast('success', 'Cards Reorganizados', 'A ordem dos KPIs foi atualizada!');
                    }
                });
            });
        }
        
        // ATALHOS DE TECLADO
        function initKeyboardShortcuts() {
            const keyboardHint = document.getElementById('keyboardHint');
            
            document.addEventListener('keydown', (e) => {
                switch(e.key.toLowerCase()) {
                    case 'h':
                        e.preventDefault();
                        window.location.href = 'dashboard.html';
                        break;
                    case 'f':
                        e.preventDefault();
                        document.querySelector('.filters-container').scrollIntoView({ behavior: 'smooth' });
                        break;
                    case 'e':
                        e.preventDefault();
                        exportAllData();
                        break;
                    case 'escape':
                        closeModal();
                        break;
                }
            });
            
            // Mostrar dica de teclado
            setTimeout(() => {
                keyboardHint.classList.add('show');
                setTimeout(() => keyboardHint.classList.remove('show'), 5000);
            }, 3000);
        }
        
        // FUNÇÃO PARA EXPORTAR TODOS OS DADOS
        function exportAllData() {
            const data = {
                kpis: {
                    saldo: 'R$ 125.000',
                    receitas: 'R$ 45.000',
                    despesas: 'R$ 28.000',
                    resultado: 'R$ 17.000'
                },
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'dashboard-data.json';
            a.click();
            URL.revokeObjectURL(url);
            
            showToast('success', 'Exportação Completa', 'Todos os dados foram exportados!');
        }
        
        // INICIALIZAR TODAS AS FUNCIONALIDADES
        document.addEventListener('DOMContentLoaded', function() {
            initTooltips();
            initDragAndDrop();
            initKeyboardShortcuts();
            
            // Animar contadores após carregamento
            setTimeout(animateCounters, 2500);
        });
        
        // OTIMIZAÇÕES DE PERFORMANCE
        
        // Cache de dados
        const DataCache = {
            cache: new Map(),
            maxAge: 5 * 60 * 1000, // 5 minutos
            
            set(key, data) {
                this.cache.set(key, {
                    data,
                    timestamp: Date.now()
                });
                localStorage.setItem(`cache_${key}`, JSON.stringify({
                    data,
                    timestamp: Date.now()
                }));
            },
            
            get(key) {
                const cached = this.cache.get(key);
                if (cached && Date.now() - cached.timestamp < this.maxAge) {
                    return cached.data;
                }
                
                const stored = localStorage.getItem(`cache_${key}`);
                if (stored) {
                    const parsed = JSON.parse(stored);
                    if (Date.now() - parsed.timestamp < this.maxAge) {
                        this.cache.set(key, parsed);
                        return parsed.data;
                    }
                }
                return null;
            },
            
            clear() {
                this.cache.clear();
                Object.keys(localStorage).forEach(key => {
                    if (key.startsWith('cache_')) {
                        localStorage.removeItem(key);
                    }
                });
            }
        };
        
        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // Lazy Loading para gráficos
        function initLazyLoading() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const element = entry.target;
                        if (element.classList.contains('lazy-loading')) {
                            element.classList.add('loaded');
                        }
                        if (element.hasAttribute('data-lazy')) {
                            loadChart(element.id);
                        }
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '50px'
            });
            
            document.querySelectorAll('.lazy-loading, [data-lazy]').forEach(el => {
                observer.observe(el);
            });
        }
        
        // Carregar gráficos sob demanda
        function loadChart(canvasId) {
            const canvas = document.getElementById(canvasId);
            if (!canvas || canvas.chart) return; // Já carregado
            
            const cachedData = DataCache.get(`chart_${canvasId}`);
            if (cachedData) {
                createChart(canvasId, cachedData);
                return;
            }
            
            // Simular carregamento de dados
            setTimeout(() => {
                const chartData = generateChartData(canvasId);
                DataCache.set(`chart_${canvasId}`, chartData);
                createChart(canvasId, chartData);
            }, 500);
        }
        
        function generateChartData(canvasId) {
            if (canvasId === 'vendasChart') {
                return {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                        datasets: [{
                            label: 'Vendas (R$)',
                            data: [12000, 19000, 15000, 25000, 22000, 30000],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }]
                    }
                };
            } else if (canvasId === 'categoriaChart') {
                return {
                    type: 'doughnut',
                    data: {
                        labels: ['Lanches', 'Bebidas', 'Sobremesas', 'Acompanhamentos'],
                        datasets: [{
                            data: [40, 25, 20, 15],
                            backgroundColor: ['#667eea', '#f093fb', '#4facfe', '#43e97b']
                        }]
                    }
                };
            }
        }
        
        function createChart(canvasId, config) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            canvas.chart = new Chart(canvas.getContext('2d'), {
                type: config.type,
                data: config.data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // Métricas de Performance
        function initPerformanceMetrics() {
            const metrics = document.getElementById('performanceMetrics');
            const loadTimeEl = document.getElementById('loadTime');
            const fpsEl = document.getElementById('fps');
            const memoryEl = document.getElementById('memory');
            
            // Load Time
            const loadTime = performance.now();
            loadTimeEl.textContent = `${loadTime.toFixed(0)}ms`;
            
            // FPS Counter
            let frameCount = 0;
            let lastTime = performance.now();
            
            function updateFPS() {
                frameCount++;
                const currentTime = performance.now();
                
                if (currentTime - lastTime >= 1000) {
                    const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                    fpsEl.textContent = `${fps} FPS`;
                    frameCount = 0;
                    lastTime = currentTime;
                }
                
                requestAnimationFrame(updateFPS);
            }
            updateFPS();
            
            // Memory Usage (se disponível)
            if (performance.memory) {
                function updateMemory() {
                    const memory = performance.memory;
                    const usedMB = Math.round(memory.usedJSHeapSize / 1024 / 1024);
                    const totalMB = Math.round(memory.totalJSHeapSize / 1024 / 1024);
                    memoryEl.textContent = `${usedMB}MB/${totalMB}MB`;
                }
                updateMemory();
                setInterval(updateMemory, 5000);
            } else {
                memoryEl.textContent = 'N/A';
            }
            
            // Mostrar métricas após 3 segundos
            setTimeout(() => {
                metrics.classList.add('show');
            }, 3000);
        }
        
        // Debounce nos filtros
        const debouncedFilter = debounce(function(value) {
            // Simular filtro de dados
            console.log('Filtrando:', value);
            showToast('info', 'Filtro Aplicado', 'Dados filtrados com sucesso!');
        }, 300);
        
        // Aplicar debounce aos inputs de filtro
        document.addEventListener('input', function(e) {
            if (e.target.matches('.filter-group input, .filter-group select')) {
                debouncedFilter(e.target.value);
            }
        });
        
        // Service Worker para cache offline
        function initServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker registrado:', registration);
                        showCacheIndicator();
                    })
                    .catch(error => {
                        console.log('Erro no Service Worker:', error);
                    });
            }
        }
        
        function showCacheIndicator() {
            const indicator = document.getElementById('cacheIndicator');
            indicator.classList.add('show');
            setTimeout(() => indicator.classList.remove('show'), 3000);
        }
        
        // Otimização de imagens
        function optimizeImages() {
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                if (img.dataset.src) {
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                img.src = img.dataset.src;
                                img.classList.remove('lazy');
                                observer.unobserve(img);
                            }
                        });
                    });
                    observer.observe(img);
                }
            });
        }
        
        // Preload de recursos críticos
        function preloadCriticalResources() {
            const criticalResources = [
                '/css/base.css',
                '/js/main.js'
            ];
            
            criticalResources.forEach(resource => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.href = resource;
                link.as = resource.endsWith('.css') ? 'style' : 'script';
                document.head.appendChild(link);
            });
        }
        
        // Inicializar otimizações
        document.addEventListener('DOMContentLoaded', function() {
            initLazyLoading();
            initPerformanceMetrics();
            initServiceWorker();
            optimizeImages();
            preloadCriticalResources();
            
            // Cache inicial de dados
            const initialData = {
                kpis: {
                    saldo: 125000,
                    receitas: 45000,
                    despesas: 28000,
                    resultado: 17000
                },
                timestamp: Date.now()
            };
            DataCache.set('dashboard_data', initialData);
        });
        
        // Limpar cache periodicamente
        setInterval(() => {
            DataCache.clear();
            console.log('Cache limpo automaticamente');
        }, 30 * 60 * 1000); // 30 minutos
    });
    </script>
</body>
</html> 